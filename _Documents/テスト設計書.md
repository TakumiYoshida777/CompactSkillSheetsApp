    - name: Run integration tests
      run: |
        cd backend && npm run test:integration
      env:
        DATABASE_URL: postgresql://skillsheet:password@postgres:5432/skillsheet_test
        REDIS_URL: redis://redis:6379

  e2e-tests:
    needs: integration-tests
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    - name: Install Playwright
      run: npx playwright install
    
    - name: Start test environment
      run: |
        docker-compose -f docker-compose.test.yml up -d
        sleep 30
    
    - name: Run E2E tests
      run: npx playwright test
    
    - name: Upload test artifacts
      uses: actions/upload-artifact@v3
      if: always()
      with:
        name: e2e-test-results
        path: |
          test-results/
          playwright-report/
```

### 6.2 ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ

#### ã‚«ãƒãƒ¬ãƒƒã‚¸è¨­å®š
```typescript
// jest.config.coverage.js
module.exports = {
  ...require('./jest.config.js'),
  collectCoverage: true,
  coverageDirectory: 'coverage',
  coverageReporters: [
    'text',
    'lcov',
    'html',
    'json-summary'
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    },
    './src/services/': {
      branches: 90,
      functions: 90,
      lines: 90,
      statements: 90
    },
    './src/controllers/': {
      branches: 85,
      functions: 85,
      lines: 85,
      statements: 85
    }
  },
  coveragePathIgnorePatterns: [
    '/node_modules/',
    '/dist/',
    '/coverage/',
    '/__tests__/',
    '/src/types/',
    '/src/migrations/',
    '/src/seeds/',
    '.d.ts'
  ]
};
```

#### ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
```bash
# scripts/generate-coverage-report.sh
#!/bin/bash

echo "ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆä¸­..."

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸
cd backend
npm run test:coverage
npm run test:integration:coverage

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸
cd ../frontend
npm run test:coverage

# çµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
cd ..
mkdir -p reports/coverage

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
cp -r backend/coverage reports/coverage/backend

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ¬ãƒãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼
cp -r frontend/coverage reports/coverage/frontend

# çµ±åˆHTMLãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
cat > reports/coverage/index.html << 'EOL'
<!DOCTYPE html>
<html>
<head>
    <title>ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .coverage-container { display: flex; gap: 20px; }
        .coverage-section { flex: 1; border: 1px solid #ddd; padding: 20px; }
        .metric { display: flex; justify-content: space-between; margin: 10px 0; }
        .high { color: green; }
        .medium { color: orange; }
        .low { color: red; }
    </style>
</head>
<body>
    <h1>ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ</h1>
    <div class="coverage-container">
        <div class="coverage-section">
            <h2>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</h2>
            <iframe src="backend/lcov-report/index.html" width="100%" height="400"></iframe>
        </div>
        <div class="coverage-section">
            <h2>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</h2>
            <iframe src="frontend/lcov-report/index.html" width="100%" height="400"></iframe>
        </div>
    </div>
</body>
</html>
EOL

echo "âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†"
echo "ğŸ“‚ ãƒ¬ãƒãƒ¼ãƒˆå ´æ‰€: reports/coverage/index.html"
```

## 7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### 7.1 è² è·ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

#### Artilleryè¨­å®š
```yaml
# tests/performance/load-test.yml
config:
  target: 'http://localhost:8000'
  phases:
    # ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—ãƒ•ã‚§ãƒ¼ã‚º
    - duration: 60
      arrivalRate: 1
      name: "Warm up"
    # æ®µéšçš„è² è·å¢—åŠ 
    - duration: 300
      arrivalRate: 5
      rampTo: 25
      name: "Ramp up load"
    # æœ€å¤§è² è·ç¶­æŒ
    - duration: 600
      arrivalRate: 25
      name: "Sustained load"
    # è² è·æ¸›å°‘
    - duration: 300
      arrivalRate: 25
      rampTo: 5
      name: "Ramp down"
  defaults:
    headers:
      Content-Type: 'application/json'
  processor: './test-functions.js'

scenarios:
  # ãƒ­ã‚°ã‚¤ãƒ³ã‚·ãƒŠãƒªã‚ª
  - name: "User Authentication"
    weight: 20
    flow:
      - post:
          url: "/api/v1/auth/login"
          json:
            email: "{{ $randomEmail() }}"
            password: "testpassword123"
          capture:
            - json: "$.data.tokens.accessToken"
              as: "accessToken"
      - think: 5

  # ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä¸€è¦§å–å¾—ã‚·ãƒŠãƒªã‚ª
  - name: "Engineer List"
    weight: 30
    flow:
      - function: "setAuthHeader"
      - get:
          url: "/api/v1/engineers"
          headers:
            Authorization: "Bearer {{ accessToken }}"
      - think: 3

  # ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ¤œç´¢ã‚·ãƒŠãƒªã‚ª
  - name: "Engineer Search"
    weight: 25
    flow:
      - function: "setAuthHeader"
      - post:
          url: "/api/v1/search/engineers"
          headers:
            Authorization: "Bearer {{ accessToken }}"
          json:
            filters:
              skills:
                programmingLanguages: ["JavaScript", "React"]
              status: ["waiting"]
      - think: 5

  # ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆæ›´æ–°ã‚·ãƒŠãƒªã‚ª
  - name: "Skill Sheet Update"
    weight: 15
    flow:
      - function: "setAuthHeader"
      - put:
          url: "/api/v1/engineers/{{ $randomEngineerId() }}/skill-sheet"
          headers:
            Authorization: "Bearer {{ accessToken }}"
          json:
            summary: "Updated skill summary"
            programmingLanguages:
              - name: "JavaScript"
                level: 4
                experienceYears: 5
      - think: 10

  # ã‚¢ãƒ—ãƒ­ãƒ¼ãƒä½œæˆã‚·ãƒŠãƒªã‚ª
  - name: "Create Approach"
    weight: 10
    flow:
      - function: "setAuthHeader"
      - post:
          url: "/api/v1/approaches"
          headers:
            Authorization: "Bearer {{ accessToken }}"
          json:
            approachType: "manual"
            targetCompanyId: "{{ $randomCompanyId() }}"
            targetEngineers: ["{{ $randomEngineerId() }}"]
            projectDetails: "Load test project"
            messageContent: "This is a load test message"
      - think: 15
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```javascript
// tests/performance/test-functions.js
const { faker } = require('@faker-js/faker');

// ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³
const testTokens = [
  'test_token_1',
  'test_token_2', 
  'test_token_3'
];

// ãƒ©ãƒ³ãƒ€ãƒ ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ID
const engineerIds = [
  'eng_001', 'eng_002', 'eng_003', 'eng_004', 'eng_005'
];

// ãƒ©ãƒ³ãƒ€ãƒ ãªä¼æ¥­ID
const companyIds = [
  'company_001', 'company_002', 'company_003'
];

module.exports = {
  setAuthHeader: function(context, events, done) {
    context.vars.accessToken = testTokens[Math.floor(Math.random() * testTokens.length)];
    return done();
  },

  $randomEmail: function() {
    return faker.internet.email();
  },

  $randomEngineerId: function() {
    return engineerIds[Math.floor(Math.random() * engineerIds.length)];
  },

  $randomCompanyId: function() {
    return companyIds[Math.floor(Math.random() * companyIds.length)];
  }
};
```

### 7.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬

#### ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—è¨­å®š
```typescript
// src/middleware/performance.ts
import { Request, Response, NextFunction } from 'express';
import { performance } from 'perf_hooks';

interface PerformanceMetrics {
  timestamp: Date;
  method: string;
  url: string;
  statusCode: number;
  responseTime: number;
  memoryUsage: NodeJS.MemoryUsage;
  cpuUsage: NodeJS.CpuUsage;
}

const performanceMetrics: PerformanceMetrics[] = [];

export const performanceMiddleware = (req: Request, res: Response, next: NextFunction) => {
  const startTime = performance.now();
  const startCpuUsage = process.cpuUsage();

  res.on('finish', () => {
    const endTime = performance.now();
    const responseTime = endTime - startTime;
    const cpuUsage = process.cpuUsage(startCpuUsage);

    const metrics: PerformanceMetrics = {
      timestamp: new Date(),
      method: req.method,
      url: req.originalUrl,
      statusCode: res.statusCode,
      responseTime,
      memoryUsage: process.memoryUsage(),
      cpuUsage
    };

    performanceMetrics.push(metrics);

    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚¢ãƒ©ãƒ¼ãƒˆ
    if (responseTime > 1000) {
      console.warn(`Slow response detected: ${req.method} ${req.originalUrl} - ${responseTime}ms`);
    }

    // ãƒ¡ãƒˆãƒªã‚¯ã‚¹é…åˆ—ã‚µã‚¤ã‚ºåˆ¶é™
    if (performanceMetrics.length > 10000) {
      performanceMetrics.splice(0, 5000);
    }
  });

  next();
};

export const getPerformanceReport = () => {
  const totalRequests = performanceMetrics.length;
  if (totalRequests === 0) return null;

  const responseTimes = performanceMetrics.map(m => m.responseTime);
  const avgResponseTime = responseTimes.reduce((a, b) => a + b, 0) / totalRequests;
  
  responseTimes.sort((a, b) => a - b);
  const p95ResponseTime = responseTimes[Math.floor(totalRequests * 0.95)];
  const p99ResponseTime = responseTimes[Math.floor(totalRequests * 0.99)];

  const statusCodes = performanceMetrics.reduce((acc, m) => {
    acc[m.statusCode] = (acc[m.statusCode] || 0) + 1;
    return acc;
  }, {} as Record<number, number>);

  const errorRate = (statusCodes[500] || 0) / totalRequests * 100;

  return {
    totalRequests,
    avgResponseTime: Math.round(avgResponseTime),
    p95ResponseTime: Math.round(p95ResponseTime),
    p99ResponseTime: Math.round(p99ResponseTime),
    errorRate: Math.round(errorRate * 100) / 100,
    statusCodes,
    period: {
      start: performanceMetrics[0].timestamp,
      end: performanceMetrics[totalRequests - 1].timestamp
    }
  };
};
```

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### 8.1 è„†å¼±æ€§ãƒ†ã‚¹ãƒˆ

#### OWASP ZAPè‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³
```yaml
# tests/security/zap-scan.yml
version: '3.8'

services:
  zap:
    image: owasp/zap2docker-stable
    command: >
      zap-full-scan.py 
      -t http://host.docker.internal:3000
      -r zap-report.html
      -x zap-report.xml
      -J zap-report.json
    volumes:
      - ./reports:/zap/wrk
    network_mode: host
    depends_on:
      - app

  app:
    image: skillsheet/app:test
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=test
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# tests/security/run-security-tests.sh

echo "ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­..."

# 1. SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
echo "ğŸ›¡ï¸ SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
sqlmap -u "http://localhost:8000/api/v1/engineers" \
       --cookie="session=test_session" \
       --level=3 \
       --risk=2 \
       --batch \
       --output-dir=./reports/sqlmap

# 2. XSSãƒ†ã‚¹ãƒˆ
echo "ğŸ›¡ï¸ XSSãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
node tests/security/xss-test.js

# 3. CSRFãƒ†ã‚¹ãƒˆ
echo "ğŸ›¡ï¸ CSRFãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
node tests/security/csrf-test.js

# 4. èªè¨¼ãƒã‚¤ãƒ‘ã‚¹ãƒ†ã‚¹ãƒˆ
echo "ğŸ›¡ï¸ èªè¨¼ãƒã‚¤ãƒ‘ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
node tests/security/auth-bypass-test.js

# 5. ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒãƒ†ã‚¹ãƒˆ
echo "ğŸ›¡ï¸ ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œä¸­..."
node tests/security/brute-force-test.js

echo "âœ… ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Œäº†"
```

#### XSSãƒ†ã‚¹ãƒˆå®Ÿè£…
```typescript
// tests/security/xss-test.js
import axios from 'axios';

const baseURL = 'http://localhost:8000/api/v1';

const xssPayloads = [
  '<script>alert("XSS")</script>',
  '"><script>alert("XSS")</script>',
  "';alert('XSS');//",
  '<img src="x" onerror="alert(\'XSS\')">',
  'javascript:alert("XSS")',
  '<svg onload="alert(\'XSS\')">',
  '${alert("XSS")}',
  '<iframe src="javascript:alert(\'XSS\')"></iframe>'
];

const testEndpoints = [
  { method: 'POST', url: '/engineers', field: 'name' },
  { method: 'PUT', url: '/engineers/test-id/skill-sheet', field: 'summary' },
  { method: 'POST', url: '/approaches', field: 'messageContent' },
  { method: 'POST', url: '/search/engineers', field: 'search' }
];

async function runXSSTests() {
  console.log('XSSãƒ†ã‚¹ãƒˆé–‹å§‹...');
  let vulnerabilitiesFound = 0;

  for (const endpoint of testEndpoints) {
    for (const payload of xssPayloads) {
      try {
        const data = { [endpoint.field]: payload };
        
        const response = await axios({
          method: endpoint.method,
          url: baseURL + endpoint.url,
          data,
          headers: {
            'Authorization': 'Bearer test-token',
            'Content-Type': 'application/json'
          }
        });

        // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã•ã‚Œã¦ã„ãªã„ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯
        if (response.data && JSON.stringify(response.data).includes(payload)) {
          console.log(`ğŸš¨ XSSè„†å¼±æ€§ç™ºè¦‹: ${endpoint.method} ${endpoint.url} - Field: ${endpoint.field}`);
          vulnerabilitiesFound++;
        }

      } catch (error) {
        // ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚‚ãƒã‚§ãƒƒã‚¯
        if (error.response && JSON.stringify(error.response.data).includes(payload)) {
          console.log(`ğŸš¨ XSSè„†å¼±æ€§ç™ºè¦‹ï¼ˆã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰: ${endpoint.method} ${endpoint.url}`);
          vulnerabilitiesFound++;
        }
      }
    }
  }

  if (vulnerabilitiesFound === 0) {
    console.log('âœ… XSSè„†å¼±æ€§ã¯ç™ºè¦‹ã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ');
  } else {
    console.log(`âŒ ${vulnerabilitiesFound}å€‹ã®XSSè„†å¼±æ€§ãŒç™ºè¦‹ã•ã‚Œã¾ã—ãŸ`);
    process.exit(1);
  }
}

runXSSTests().catch(console.error);
```

## 9. ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†

### 9.1 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼

```typescript
// tests/helpers/factories.ts
import { faker } from '@faker-js/faker';

export class UserFactory {
  static create(overrides?: Partial<User>): User {
    return {
      id: faker.string.uuid(),
      name: faker.person.fullName(),
      email: faker.internet.email(),
      passwordHash: '$2b$10$hashedPassword',
      companyId: faker.string.uuid(),
      roles: ['engineer'],
      isActive: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
  }

  static createAdmin(overrides?: Partial<User>): User {
    return this.create({
      roles: ['admin'],
      ...overrides
    });
  }

  static createSales(overrides?: Partial<User>): User {
    return this.create({
      roles: ['sales'],
      ...overrides
    });
  }
}

export class EngineerFactory {
  static create(overrides?: Partial<Engineer>): Engineer {
    return {
      id: faker.string.uuid(),
      name: faker.person.fullName(),
      email: faker.internet.email(),
      engineerType: 'employee',
      currentStatus: 'working',
      availableDate: faker.date.future(),
      nearestStation: faker.location.city() + 'é§…',
      githubUrl: faker.internet.url(),
      companyId: faker.string.uuid(),
      isPublic: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
  }

  static createWaiting(overrides?: Partial<Engineer>): Engineer {
    return this.create({
      currentStatus: 'waiting',
      availableDate: faker.date.soon(),
      ...overrides
    });
  }
}

export class SkillSheetFactory {
  static create(overrides?: Partial<SkillSheet>): SkillSheet {
    return {
      id: faker.string.uuid(),
      engineerId: faker.string.uuid(),
      summary: faker.lorem.paragraphs(2),
      totalExperienceYears: faker.number.int({ min: 1, max: 20 }),
      programmingLanguages: [
        {
          name: 'JavaScript',
          level: faker.number.int({ min: 1, max: 5 }),
          experienceYears: faker.number.int({ min: 1, max: 10 })
        }
      ],
      frameworks: [
        {
          name: 'React',
          level: faker.number.int({ min: 1, max: 5 }),
          experienceYears: faker.number.int({ min: 1, max: 5 })
        }
      ],
      isCompleted: true,
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides
    };
  }
}

export class TestDataBuilder {
  static async createTestUser(): Promise<{ user: User; token: string }> {
    const user = UserFactory.create();
    const token = jwt.sign(
      { userId: user.id, companyId: user.companyId },
      'test-secret',
      { expiresIn: '1h' }
    );
    
    return { user, token };
  }

  static async createTestCompanyWithUsers(): Promise<{
    company: Company;
    admin: User;
    sales: User;
    engineers: Engineer[];
  }> {
    const company = CompanyFactory.create();
    
    const admin = UserFactory.createAdmin({ companyId: company.id });
    const sales = UserFactory.createSales({ companyId: company.id });
    
    const engineers = Array.from({ length: 5 }, () =>
      EngineerFactory.create({ companyId: company.id })
    );

    return { company, admin, sales, engineers };
  }
}
```

### 9.2 ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ãƒ¼ãƒ‰

```typescript
// tests/helpers/seed.ts
export class TestSeeder {
  static async seedDatabase(): Promise<void> {
    // ä¼æ¥­ãƒ‡ãƒ¼ã‚¿
    const companies = await Promise.all([
      this.createCompany('SESä¼æ¥­A', 'ses'),
      this.createCompany('SESä¼æ¥­B', 'ses'),
      this.createCompany('ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­A', 'client'),
      this.createCompany('ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­B', 'client')
    ]);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿
    for (const company of companies) {
      if (company.companyType === 'ses') {
        await this.createUsersForSESCompany(company);
      } else {
        await this.createUsersForClientCompany(company);
      }
    }

    // ã‚¹ã‚­ãƒ«ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
    await this.createSkillMasterData();
  }

  private static async createCompany(name: string, type: string): Promise<Company> {
    return await companyRepository.create({
      name,
      companyType: type,
      emailDomain: name.toLowerCase().replace(/\s+/g, '') + '.com',
      maxEngineers: type === 'ses' ? 100 : 0,
      isActive: true
    });
  }

  private static async createUsersForSESCompany(company: Company): Promise<void> {
    // ç®¡ç†è€…
    const admin = await userRepository.create(
      UserFactory.createAdmin({
        companyId: company.id,
        email: `admin@${company.emailDomain}`
      })
    );

    // å–¶æ¥­æ‹…å½“è€…
    const sales = await userRepository.create(
      UserFactory.createSales({
        companyId: company.id,
        email: `sales@${company.emailDomain}`
      })
    );

    // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
    const engineers = await Promise.all(
      Array.from({ length: 10 }, (_, i) =>
        # è©³ç´°ãªãƒ†ã‚¹ãƒˆè¨­è¨ˆæ›¸ - ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

## 1. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥æ¦‚è¦

### 1.1 ãƒ†ã‚¹ãƒˆæ–¹é‡
| é …ç›® | å†…å®¹ |
|------|------|
| ãƒ†ã‚¹ãƒˆæ‰‹æ³• | è‡ªå‹•ãƒ†ã‚¹ãƒˆä¸­å¿ƒã€æ‰‹å‹•ãƒ†ã‚¹ãƒˆè£œå®Œ |
| ãƒ†ã‚¹ãƒˆç¯„å›² | å˜ä½“â†’çµåˆâ†’ã‚·ã‚¹ãƒ†ãƒ â†’å—å…¥ãƒ†ã‚¹ãƒˆ |
| ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™ | ã‚³ãƒ¼ãƒ‰ï¼š80%ä»¥ä¸Šã€æ©Ÿèƒ½ï¼š100% |
| ãƒ†ã‚¹ãƒˆç’°å¢ƒ | ç‹¬ç«‹ã—ãŸãƒ†ã‚¹ãƒˆç’°å¢ƒã§å®Ÿè¡Œ |
| CI/CDçµ±åˆ | å…¨è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«çµ±åˆ |

### 1.2 ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰
```
       /\
      /  \
     / E2E \ (10%)
    /______\
   /        \
  /   çµ±åˆ   \ (20%)
 /__________\
/            \
/    å˜ä½“     \ (70%)
/______________\
```

## 2. å˜ä½“ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### 2.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å˜ä½“ãƒ†ã‚¹ãƒˆ

#### 2.1.1 ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ§‹æˆ
```typescript
// jest.config.js
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/src'],
  testMatch: ['**/__tests__/**/*.test.ts'],
  collectCoverageFrom: [
    'src/**/*.{ts,js}',
    '!src/**/*.d.ts',
    '!src/types/**',
    '!src/migrations/**',
    '!src/seeds/**'
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  },
  setupFilesAfterEnv: ['<rootDir>/src/__tests__/setup.ts'],
  testTimeout: 30000
};
```

#### 2.1.2 ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
```typescript
// src/__tests__/services/EngineerService.test.ts
import { EngineerService } from '../../services/EngineerService';
import { EngineerRepository } from '../../repositories/EngineerRepository';
import { SkillSheetRepository } from '../../repositories/SkillSheetRepository';
import { ValidationError, NotFoundError } from '../../errors';

// ãƒ¢ãƒƒã‚¯ã®è¨­å®š
jest.mock('../../repositories/EngineerRepository');
jest.mock('../../repositories/SkillSheetRepository');

describe('EngineerService', () => {
  let engineerService: EngineerService;
  let mockEngineerRepository: jest.Mocked<EngineerRepository>;
  let mockSkillSheetRepository: jest.Mocked<SkillSheetRepository>;

  beforeEach(() => {
    mockEngineerRepository = new EngineerRepository() as jest.Mocked<EngineerRepository>;
    mockSkillSheetRepository = new SkillSheetRepository() as jest.Mocked<SkillSheetRepository>;
    engineerService = new EngineerService(mockEngineerRepository, mockSkillSheetRepository);
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  describe('createEngineer', () => {
    const validEngineerData = {
      name: 'ç”°ä¸­å¤ªéƒ',
      email: 'tanaka@company.com',
      engineerType: 'employee' as const,
      companyId: 'company_123',
      phone: '03-1234-5678',
      nearestStation: 'æ–°å®¿é§…'
    };

    it('æ­£å¸¸ãªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ‡ãƒ¼ã‚¿ã§ä½œæˆãŒæˆåŠŸã™ã‚‹ã“ã¨', async () => {
      // Arrange
      const mockCreatedEngineer = { id: 'eng_123', ...validEngineerData };
      mockEngineerRepository.create.mockResolvedValue(mockCreatedEngineer);

      // Act
      const result = await engineerService.createEngineer(validEngineerData);

      // Assert
      expect(result).toEqual(mockCreatedEngineer);
      expect(mockEngineerRepository.create).toHaveBeenCalledWith(validEngineerData);
    });

    it('é‡è¤‡ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      mockEngineerRepository.findByEmail.mockResolvedValue({ id: 'existing_eng' } as any);

      // Act & Assert
      await expect(engineerService.createEngineer(validEngineerData))
        .rejects.toThrow(ValidationError);
    });

    it('ç„¡åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      const invalidData = { ...validEngineerData, email: 'invalid-email' };

      // Act & Assert
      await expect(engineerService.createEngineer(invalidData))
        .rejects.toThrow(ValidationError);
    });

    it('ä¼æ¥­ã®æœ€å¤§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ•°ã‚’è¶…éã—ãŸå ´åˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      mockEngineerRepository.countByCompanyId.mockResolvedValue(100);
      mockEngineerRepository.findByEmail.mockResolvedValue(null);

      // Act & Assert
      await expect(engineerService.createEngineer(validEngineerData))
        .rejects.toThrow(ValidationError);
    });
  });

  describe('updateEngineerStatus', () => {
    it('å¾…æ©Ÿã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã«æ›´æ–°ã§ãã‚‹ã“ã¨', async () => {
      // Arrange
      const engineerId = 'eng_123';
      const newStatus = 'waiting';
      const mockEngineer = { id: engineerId, currentStatus: 'working' };
      mockEngineerRepository.findById.mockResolvedValue(mockEngineer as any);
      mockEngineerRepository.updateStatus.mockResolvedValue({ ...mockEngineer, currentStatus: newStatus } as any);

      // Act
      const result = await engineerService.updateEngineerStatus(engineerId, newStatus);

      // Assert
      expect(result.currentStatus).toBe(newStatus);
      expect(mockEngineerRepository.updateStatus).toHaveBeenCalledWith(engineerId, newStatus);
    });

    it('å­˜åœ¨ã—ãªã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢IDã§NotFoundErrorãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      mockEngineerRepository.findById.mockResolvedValue(null);

      // Act & Assert
      await expect(engineerService.updateEngineerStatus('invalid_id', 'waiting'))
        .rejects.toThrow(NotFoundError);
    });
  });

  describe('searchEngineers', () => {
    const searchCriteria = {
      skills: ['JavaScript', 'React'],
      experienceYears: { min: 3, max: 10 },
      status: ['waiting'],
      companyId: 'company_123'
    };

    it('æ¤œç´¢æ¡ä»¶ã«åˆè‡´ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå–å¾—ã§ãã‚‹ã“ã¨', async () => {
      // Arrange
      const mockEngineers = [
        { id: 'eng_1', name: 'ç”°ä¸­å¤ªéƒ', skills: ['JavaScript', 'React'] },
        { id: 'eng_2', name: 'ä½è—¤èŠ±å­', skills: ['JavaScript', 'Vue.js'] }
      ];
      mockEngineerRepository.search.mockResolvedValue(mockEngineers as any);

      // Act
      const result = await engineerService.searchEngineers(searchCriteria);

      // Assert
      expect(result).toEqual(mockEngineers);
      expect(mockEngineerRepository.search).toHaveBeenCalledWith(searchCriteria);
    });

    it('æ¡ä»¶ã«åˆè‡´ã™ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒã„ãªã„å ´åˆç©ºé…åˆ—ãŒè¿”ã•ã‚Œã‚‹ã“ã¨', async () => {
      // Arrange
      mockEngineerRepository.search.mockResolvedValue([]);

      // Act
      const result = await engineerService.searchEngineers(searchCriteria);

      // Assert
      expect(result).toEqual([]);
    });
  });
});
```

#### 2.1.3 èªè¨¼ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ†ã‚¹ãƒˆ
```typescript
// src/__tests__/services/AuthService.test.ts
import { AuthService } from '../../services/AuthService';
import { UserRepository } from '../../repositories/UserRepository';
import { SessionManager } from '../../services/SessionManager';
import { MFAService } from '../../services/MFAService';
import bcrypt from 'bcrypt';
import jwt from 'jsonwebtoken';

jest.mock('../../repositories/UserRepository');
jest.mock('../../services/SessionManager');
jest.mock('../../services/MFAService');
jest.mock('bcrypt');
jest.mock('jsonwebtoken');

describe('AuthService', () => {
  let authService: AuthService;
  let mockUserRepository: jest.Mocked<UserRepository>;
  let mockSessionManager: jest.Mocked<SessionManager>;
  let mockMFAService: jest.Mocked<MFAService>;

  beforeEach(() => {
    mockUserRepository = new UserRepository() as jest.Mocked<UserRepository>;
    mockSessionManager = new SessionManager() as jest.Mocked<SessionManager>;
    mockMFAService = new MFAService() as jest.Mocked<MFAService>;
    authService = new AuthService(mockUserRepository, mockSessionManager, mockMFAService);
  });

  describe('login', () => {
    const loginData = {
      email: 'test@company.com',
      password: 'password123',
      ipAddress: '192.168.1.1',
      userAgent: 'Mozilla/5.0...'
    };

    const mockUser = {
      id: 'user_123',
      email: 'test@company.com',
      passwordHash: '$2b$10$hashedPassword',
      isActive: true,
      companyId: 'company_123',
      mfaEnabled: false,
      failedLoginCount: 0
    };

    it('æ­£å¸¸ãªãƒ­ã‚°ã‚¤ãƒ³ãŒã§ãã‚‹ã“ã¨', async () => {
      // Arrange
      mockUserRepository.findByEmail.mockResolvedValue(mockUser as any);
      (bcrypt.compare as jest.Mock).mockResolvedValue(true);
      mockSessionManager.createSession.mockResolvedValue({ sessionId: 'session_123' } as any);
      (jwt.sign as jest.Mock).mockReturnValue('jwt_token');

      // Act
      const result = await authService.login(loginData);

      // Assert
      expect(result).toEqual({
        user: expect.objectContaining({ id: 'user_123' }),
        tokens: expect.objectContaining({ accessToken: 'jwt_token' })
      });
      expect(mockUserRepository.resetFailedLoginCount).toHaveBeenCalledWith('user_123');
    });

    it('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹å ´åˆã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      mockUserRepository.findByEmail.mockResolvedValue(mockUser as any);
      (bcrypt.compare as jest.Mock).mockResolvedValue(false);

      // Act & Assert
      await expect(authService.login(loginData))
        .rejects.toThrow('Invalid credentials');
      expect(mockUserRepository.incrementFailedLoginCount).toHaveBeenCalledWith('user_123');
    });

    it('MFAæœ‰åŠ¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä¸€æ™‚ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã•ã‚Œã‚‹ã“ã¨', async () => {
      // Arrange
      const mfaUser = { ...mockUser, mfaEnabled: true };
      mockUserRepository.findByEmail.mockResolvedValue(mfaUser as any);
      (bcrypt.compare as jest.Mock).mockResolvedValue(true);

      // Act
      const result = await authService.login(loginData);

      // Assert
      expect(result).toEqual({
        requireMFA: true,
        tempToken: expect.any(String),
        user: expect.objectContaining({ id: 'user_123' })
      });
    });

    it('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ä¸­ã¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      const lockedUser = { 
        ...mockUser, 
        accountLockedUntil: new Date(Date.now() + 60000) // 1åˆ†å¾Œã¾ã§
      };
      mockUserRepository.findByEmail.mockResolvedValue(lockedUser as any);

      // Act & Assert
      await expect(authService.login(loginData))
        .rejects.toThrow('Account is locked');
    });
  });

  describe('verifyMFA', () => {
    const mfaData = {
      tempToken: 'temp_token_123',
      mfaCode: '123456',
      ipAddress: '192.168.1.1',
      userAgent: 'Mozilla/5.0...'
    };

    it('æ­£ã—ã„MFAã‚³ãƒ¼ãƒ‰ã§èªè¨¼ãŒå®Œäº†ã™ã‚‹ã“ã¨', async () => {
      // Arrange
      const mockUser = { id: 'user_123', mfaEnabled: true };
      (jwt.verify as jest.Mock).mockReturnValue({ userId: 'user_123' });
      mockUserRepository.findById.mockResolvedValue(mockUser as any);
      mockMFAService.verifyTOTP.mockResolvedValue(true);
      mockSessionManager.createSession.mockResolvedValue({ sessionId: 'session_123' } as any);
      (jwt.sign as jest.Mock).mockReturnValue('jwt_token');

      // Act
      const result = await authService.verifyMFA(mfaData);

      // Assert
      expect(result).toEqual({
        user: expect.objectContaining({ id: 'user_123' }),
        tokens: expect.objectContaining({ accessToken: 'jwt_token' })
      });
    });

    it('é–“é•ã£ãŸMFAã‚³ãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      (jwt.verify as jest.Mock).mockReturnValue({ userId: 'user_123' });
      mockUserRepository.findById.mockResolvedValue({ id: 'user_123' } as any);
      mockMFAService.verifyTOTP.mockResolvedValue(false);

      // Act & Assert
      await expect(authService.verifyMFA(mfaData))
        .rejects.toThrow('Invalid MFA code');
    });
  });

  describe('validateToken', () => {
    it('æœ‰åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§æ¤œè¨¼ãŒæˆåŠŸã™ã‚‹ã“ã¨', async () => {
      // Arrange
      const mockPayload = { userId: 'user_123', sessionId: 'session_123' };
      (jwt.verify as jest.Mock).mockReturnValue(mockPayload);
      mockSessionManager.validateSession.mockResolvedValue({ isValid: true } as any);

      // Act
      const result = await authService.validateToken('valid_token');

      // Assert
      expect(result).toEqual(mockPayload);
    });

    it('ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      // Arrange
      (jwt.verify as jest.Mock).mockImplementation(() => {
        throw new Error('Invalid token');
      });

      // Act & Assert
      await expect(authService.validateToken('invalid_token'))
        .rejects.toThrow('Invalid token');
    });
  });
});
```

### 2.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å˜ä½“ãƒ†ã‚¹ãƒˆ

#### 2.2.1 Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
```typescript
// src/__tests__/components/EngineerList.test.tsx
import React from 'react';
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { BrowserRouter } from 'react-router-dom';
import { EngineerList } from '../../components/EngineerList';
import * as engineerApi from '../../api/engineerApi';

// APIãƒ¢ãƒƒã‚¯
jest.mock('../../api/engineerApi');
const mockedEngineerApi = engineerApi as jest.Mocked<typeof engineerApi>;

// ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼
const renderWithProviders = (component: React.ReactElement) => {
  const queryClient = new QueryClient({
    defaultOptions: {
      queries: { retry: false },
      mutations: { retry: false }
    }
  });

  return render(
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        {component}
      </BrowserRouter>
    </QueryClientProvider>
  );
};

describe('EngineerList', () => {
  const mockEngineers = [
    {
      id: 'eng_1',
      name: 'ç”°ä¸­å¤ªéƒ',
      email: 'tanaka@company.com',
      currentStatus: 'waiting',
      skills: { programmingLanguages: [{ name: 'JavaScript', level: 4 }] },
      availableDate: '2024-02-01'
    },
    {
      id: 'eng_2',
      name: 'ä½è—¤èŠ±å­',
      email: 'sato@company.com',
      currentStatus: 'working',
      skills: { programmingLanguages: [{ name: 'Python', level: 3 }] },
      availableDate: null
    }
  ];

  beforeEach(() => {
    mockedEngineerApi.getEngineers.mockResolvedValue({
      data: mockEngineers,
      meta: { pagination: { total: 2, page: 1, totalPages: 1 } }
    });
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  it('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä¸€è¦§ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', async () => {
    // Act
    renderWithProviders(<EngineerList />);

    // Assert
    await waitFor(() => {
      expect(screen.getByText('ç”°ä¸­å¤ªéƒ')).toBeInTheDocument();
      expect(screen.getByText('ä½è—¤èŠ±å­')).toBeInTheDocument();
    });

    expect(screen.getByText('waiting')).toBeInTheDocument();
    expect(screen.getByText('working')).toBeInTheDocument();
  });

  it('æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒå‹•ä½œã™ã‚‹ã“ã¨', async () => {
    // Arrange
    renderWithProviders(<EngineerList />);
    await waitFor(() => screen.getByText('ç”°ä¸­å¤ªéƒ'));

    const searchInput = screen.getByPlaceholderText('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’æ¤œç´¢');
    const statusFilter = screen.getByLabelText('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹');

    // Act
    fireEvent.change(searchInput, { target: { value: 'ç”°ä¸­' } });
    fireEvent.change(statusFilter, { target: { value: 'waiting' } });
    fireEvent.click(screen.getByRole('button', { name: 'æ¤œç´¢' }));

    // Assert
    await waitFor(() => {
      expect(mockedEngineerApi.getEngineers).toHaveBeenCalledWith({
        search: 'ç”°ä¸­',
        status: 'waiting',
        page: 1,
        limit: 20
      });
    });
  });

  it('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è©³ç´°ãƒšãƒ¼ã‚¸ã«é·ç§»ã§ãã‚‹ã“ã¨', async () => {
    // Arrange
    renderWithProviders(<EngineerList />);
    await waitFor(() => screen.getByText('ç”°ä¸­å¤ªéƒ'));

    // Act
    fireEvent.click(screen.getByText('ç”°ä¸­å¤ªéƒ'));

    // Assert
    expect(window.location.pathname).toBe('/engineers/eng_1');
  });

  it('æ–°è¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç™»éŒ²ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', async () => {
    // Arrange
    renderWithProviders(<EngineerList />);

    // Assert
    await waitFor(() => {
      expect(screen.getByRole('button', { name: 'æ–°è¦ç™»éŒ²' })).toBeInTheDocument();
    });
  });

  it('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
    // Arrange
    mockedEngineerApi.getEngineers.mockImplementation(
      () => new Promise(resolve => setTimeout(resolve, 1000))
    );

    // Act
    renderWithProviders(<EngineerList />);

    // Assert
    expect(screen.getByTestId('loading-spinner')).toBeInTheDocument();
  });

  it('ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', async () => {
    // Arrange
    mockedEngineerApi.getEngineers.mockRejectedValue(new Error('Network Error'));

    // Act
    renderWithProviders(<EngineerList />);

    // Assert
    await waitFor(() => {
      expect(screen.getByText('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ')).toBeInTheDocument();
    });
  });
});
```

#### 2.2.2 ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
```typescript
// src/__tests__/hooks/useAuth.test.ts
import { renderHook, act } from '@testing-library/react';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { useAuth } from '../../hooks/useAuth';
import * as authApi from '../../api/authApi';

jest.mock('../../api/authApi');
const mockedAuthApi = authApi as jest.Mocked<typeof authApi>;

const createWrapper = () => {
  const queryClient = new QueryClient({
    defaultOptions: {
      queries: { retry: false },
      mutations: { retry: false }
    }
  });
  
  return ({ children }: { children: React.ReactNode }) => (
    <QueryClientProvider client={queryClient}>
      {children}
    </QueryClientProvider>
  );
};

describe('useAuth', () => {
  beforeEach(() => {
    localStorage.clear();
  });

  it('åˆæœŸçŠ¶æ…‹ã§ã¯æœªèªè¨¼ã§ã‚ã‚‹ã“ã¨', () => {
    // Act
    const { result } = renderHook(() => useAuth(), { wrapper: createWrapper() });

    // Assert
    expect(result.current.isAuthenticated).toBe(false);
    expect(result.current.user).toBe(null);
  });

  it('ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã™ã‚‹ã“ã¨', async () => {
    // Arrange
    const loginData = { email: 'test@company.com', password: 'password' };
    const mockResponse = {
      user: { id: 'user_123', name: 'Test User' },
      tokens: { accessToken: 'token123' }
    };
    mockedAuthApi.login.mockResolvedValue(mockResponse);

    const { result } = renderHook(() => useAuth(), { wrapper: createWrapper() });

    // Act
    await act(async () => {
      await result.current.login(loginData);
    });

    // Assert
    expect(result.current.isAuthenticated).toBe(true);
    expect(result.current.user).toEqual(mockResponse.user);
    expect(localStorage.getItem('accessToken')).toBe('token123');
  });

  it('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ãŸå ´åˆã‚¨ãƒ©ãƒ¼ãŒè¨­å®šã•ã‚Œã‚‹ã“ã¨', async () => {
    // Arrange
    const loginData = { email: 'test@company.com', password: 'wrong' };
    mockedAuthApi.login.mockRejectedValue(new Error('Invalid credentials'));

    const { result } = renderHook(() => useAuth(), { wrapper: createWrapper() });

    // Act
    await act(async () => {
      try {
        await result.current.login(loginData);
      } catch (error) {
        // ã‚¨ãƒ©ãƒ¼ã¯æœŸå¾…ã•ã‚Œã‚‹
      }
    });

    // Assert
    expect(result.current.isAuthenticated).toBe(false);
    expect(result.current.error).toBe('Invalid credentials');
  });

  it('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨', async () => {
    // Arrange
    localStorage.setItem('accessToken', 'token123');
    const { result } = renderHook(() => useAuth(), { wrapper: createWrapper() });

    // åˆæœŸçŠ¶æ…‹ã‚’èªè¨¼æ¸ˆã¿ã«ã™ã‚‹
    await act(async () => {
      result.current.setUser({ id: 'user_123', name: 'Test User' } as any);
    });

    // Act
    await act(async () => {
      result.current.logout();
    });

    // Assert
    expect(result.current.isAuthenticated).toBe(false);
    expect(result.current.user).toBe(null);
    expect(localStorage.getItem('accessToken')).toBe(null);
  });
});
```

## 3. çµåˆãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### 3.1 APIçµåˆãƒ†ã‚¹ãƒˆ

#### 3.1.1 ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```typescript
// src/__tests__/integration/setup.ts
import { Pool } from 'pg';
import Redis from 'ioredis';
import app from '../../app';
import { setupDatabase, seedTestData } from './helpers/database';

export interface TestContext {
  dbPool: Pool;
  redis: Redis;
  app: any;
}

let testContext: TestContext;

export const setupIntegrationTests = async (): Promise<TestContext> => {
  // ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
  const dbPool = new Pool({
    connectionString: process.env.TEST_DATABASE_URL,
    max: 5
  });

  // ãƒ†ã‚¹ãƒˆç”¨Redisæ¥ç¶š
  const redis = new Redis(process.env.TEST_REDIS_URL);

  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  await setupDatabase(dbPool);

  // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®æŠ•å…¥
  await seedTestData(dbPool);

  testContext = {
    dbPool,
    redis,
    app
  };

  return testContext;
};

export const cleanupIntegrationTests = async (): Promise<void> => {
  if (testContext) {
    await testContext.dbPool.end();
    await testContext.redis.quit();
  }
};

export const getTestContext = (): TestContext => testContext;

// Jest setup
beforeAll(async () => {
  await setupIntegrationTests();
}, 30000);

afterAll(async () => {
  await cleanupIntegrationTests();
}, 10000);

beforeEach(async () => {
  // å„ãƒ†ã‚¹ãƒˆå‰ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  const { dbPool } = getTestContext();
  await dbPool.query('TRUNCATE TABLE engineers, users, skill_sheets, projects CASCADE');
  await seedTestData(dbPool);
});
```

#### 3.1.2 ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç®¡ç†APIçµåˆãƒ†ã‚¹ãƒˆ
```typescript
// src/__tests__/integration/engineers.test.ts
import request from 'supertest';
import { getTestContext } from './setup';

describe('Engineers API Integration', () => {
  let authToken: string;
  let companyId: string;

  beforeEach(async () => {
    const { app } = getTestContext();
    
    // ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³
    const loginResponse = await request(app)
      .post('/api/v1/auth/login')
      .send({
        email: 'admin@testcompany.com',
        password: 'testpassword123'
      });

    authToken = loginResponse.body.data.tokens.accessToken;
    companyId = loginResponse.body.data.user.companyId;
  });

  describe('POST /api/v1/engineers', () => {
    const validEngineerData = {
      name: 'æ–°è¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',
      email: 'newengineer@testcompany.com',
      engineerType: 'employee',
      nearestStation: 'æ–°å®¿é§…',
      phone: '03-1234-5678'
    };

    it('æ­£å¸¸ãªãƒ‡ãƒ¼ã‚¿ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä½œæˆãŒæˆåŠŸã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send(validEngineerData)
        .expect(201);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toMatchObject({
        name: validEngineerData.name,
        email: validEngineerData.email,
        engineerType: validEngineerData.engineerType
      });
      expect(response.body.data.id).toBeDefined();
    });

    it('é‡è¤‡ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      // 1å›ç›®ã®ä½œæˆ
      await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send(validEngineerData);

      // 2å›ç›®ã®ä½œæˆï¼ˆé‡è¤‡ï¼‰
      const response = await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send(validEngineerData)
        .expect(409);

      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('DUPLICATE_EMAIL');
    });

    it('èªè¨¼ãªã—ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .post('/api/v1/engineers')
        .send(validEngineerData)
        .expect(401);

      expect(response.body.success).toBe(false);
    });

    it('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«è¿”ã•ã‚Œã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();
      const invalidData = { ...validEngineerData, email: 'invalid-email' };

      const response = await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send(invalidData)
        .expect(422);

      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('VALIDATION_ERROR');
      expect(response.body.error.details).toEqual(
        expect.arrayContaining([
          expect.objectContaining({
            field: 'email',
            code: 'INVALID_EMAIL_FORMAT'
          })
        ])
      );
    });
  });

  describe('GET /api/v1/engineers', () => {
    beforeEach(async () => {
      // ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’äº‹å‰ä½œæˆ
      const { app } = getTestContext();
      
      await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          name: 'ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢1',
          email: 'test1@testcompany.com',
          engineerType: 'employee',
          currentStatus: 'waiting'
        });

      await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          name: 'ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢2',
          email: 'test2@testcompany.com',
          engineerType: 'employee',
          currentStatus: 'working'
        });
    });

    it('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä¸€è¦§ãŒå–å¾—ã§ãã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .get('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveLength(2);
      expect(response.body.meta.pagination.total).toBe(2);
    });

    it('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒå‹•ä½œã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .get('/api/v1/engineers?status=waiting')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveLength(1);
      expect(response.body.data[0].currentStatus).toBe('waiting');
    });

    it('ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .get('/api/v1/engineers?page=1&limit=1')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data).toHaveLength(1);
      expect(response.body.meta.pagination.page).toBe(1);
      expect(response.body.meta.pagination.hasNext).toBe(true);
    });
  });

  describe('PUT /api/v1/engineers/:id', () => {
    let engineerId: string;

    beforeEach(async () => {
      const { app } = getTestContext();
      
      const createResponse = await request(app)
        .post('/api/v1/engineers')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          name: 'æ›´æ–°ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',
          email: 'update@testcompany.com',
          engineerType: 'employee'
        });
      
      engineerId = createResponse.body.data.id;
    });

    it('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æƒ…å ±ãŒæ›´æ–°ã§ãã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();
      const updateData = {
        name: 'æ›´æ–°å¾Œã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',
        nearestStation: 'æ¸‹è°·é§…'
      };

      const response = await request(app)
        .put(`/api/v1/engineers/${engineerId}`)
        .set('Authorization', `Bearer ${authToken}`)
        .send(updateData)
        .expect(200);

      expect(response.body.success).toBe(true);
      expect(response.body.data.name).toBe(updateData.name);
      expect(response.body.data.nearestStation).toBe(updateData.nearestStation);
    });

    it('å­˜åœ¨ã—ãªã„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢IDã§404ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .put('/api/v1/engineers/nonexistent-id')
        .set('Authorization', `Bearer ${authToken}`)
        .send({ name: 'æ›´æ–°ãƒ†ã‚¹ãƒˆ' })
        .expect(404);

      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('ENGINEER_NOT_FOUND');
    });
  });
});
```

### 3.2 èªè¨¼ãƒ•ãƒ­ãƒ¼çµåˆãƒ†ã‚¹ãƒˆ

```typescript
// src/__tests__/integration/auth-flow.test.ts
import request from 'supertest';
import { getTestContext } from './setup';

describe('Authentication Flow Integration', () => {
  describe('å®Œå…¨ãªèªè¨¼ãƒ•ãƒ­ãƒ¼', () => {
    it('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã¾ã§ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼ãŒå‹•ä½œã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      // 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²
      const registerData = {
        name: 'ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼',
        email: 'flowtest@testcompany.com',
        password: 'TestPassword123!',
        companyId: 'test-company-id',
        invitationToken: 'valid-invitation-token'
      };

      const registerResponse = await request(app)
        .post('/api/v1/auth/register')
        .send(registerData)
        .expect(201);

      expect(registerResponse.body.success).toBe(true);
      expect(registerResponse.body.data.user.email).toBe(registerData.email);

      // 2. ãƒ­ã‚°ã‚¤ãƒ³
      const loginResponse = await request(app)
        .post('/api/v1/auth/login')
        .send({
          email: registerData.email,
          password: registerData.password
        })
        .expect(200);

      expect(loginResponse.body.success).toBe(true);
      const { accessToken } = loginResponse.body.data.tokens;

      // 3. èªè¨¼ãŒå¿…è¦ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
      const protectedResponse = await request(app)
        .get('/api/v1/auth/me')
        .set('Authorization', `Bearer ${accessToken}`)
        .expect(200);

      expect(protectedResponse.body.data.user.email).toBe(registerData.email);

      // 4. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
      const logoutResponse = await request(app)
        .post('/api/v1/auth/logout')
        .set('Authorization', `Bearer ${accessToken}`)
        .expect(200);

      expect(logoutResponse.body.success).toBe(true);

      // 5. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¾Œã®ã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
      await request(app)
        .get('/api/v1/auth/me')
        .set('Authorization', `Bearer ${accessToken}`)
        .expect(401);
    });

    it('MFAæœ‰åŠ¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®èªè¨¼ãƒ•ãƒ­ãƒ¼ãŒå‹•ä½œã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      // MFAæœ‰åŠ¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³
      const loginResponse = await request(app)
        .post('/api/v1/auth/login')
        .send({
          email: 'mfa@testcompany.com',
          password: 'testpassword123'
        })
        .expect(202);

      expect(loginResponse.body.success).toBe(false);
      expect(loginResponse.body.error.code).toBe('MFA_REQUIRED');
      const { tempToken } = loginResponse.body.error.details;

      // MFAèªè¨¼
      const mfaResponse = await request(app)
        .post('/api/v1/auth/mfa/verify')
        .send({
          tempToken,
          mfaCode: '123456' // ãƒ†ã‚¹ãƒˆç”¨ã®å›ºå®šã‚³ãƒ¼ãƒ‰
        })
        .expect(200);

      expect(mfaResponse.body.success).toBe(true);
      expect(mfaResponse.body.data.tokens.accessToken).toBeDefined();
    });
  });

  describe('ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°ãƒ•ãƒ­ãƒ¼', () => {
    it('ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã§ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ›´æ–°ã§ãã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      // ãƒ­ã‚°ã‚¤ãƒ³
      const loginResponse = await request(app)
        .post('/api/v1/auth/login')
        .send({
          email: 'test@testcompany.com',
          password: 'testpassword123'
        });

      const { refreshToken } = loginResponse.body.data.tokens;

      // ãƒˆãƒ¼ã‚¯ãƒ³æ›´æ–°
      const refreshResponse = await request(app)
        .post('/api/v1/auth/refresh')
        .send({ refreshToken })
        .expect(200);

      expect(refreshResponse.body.success).toBe(true);
      expect(refreshResponse.body.data.tokens.accessToken).toBeDefined();
      expect(refreshResponse.body.data.tokens.refreshToken).toBeDefined();
    });

    it('ç„¡åŠ¹ãªãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã“ã¨', async () => {
      const { app } = getTestContext();

      const response = await request(app)
        .post('/api/v1/auth/refresh')
        .send({ refreshToken: 'invalid-token' })
        .expect(401);

      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('INVALID_REFRESH_TOKEN');
    });
  });
});
```

## 4. ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆï¼ˆE2Eãƒ†ã‚¹ãƒˆï¼‰è¨­è¨ˆ

### 4.1 Playwrightã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### 4.1.1 Playwrightè¨­å®š
```typescript
// playwright.config.ts
import { defineConfig, devices } from '@playwright/test';

export default defineConfig({
  testDir: './e2e',
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 0,
  workers: process.env.CI ? 1 : undefined,
  reporter: [
    ['html'],
    ['junit', { outputFile: 'test-results/junit.xml' }],
    ['allure-playwright']
  ],
  use: {
    baseURL: process.env.E2E_BASE_URL || 'http://localhost:3000',
    trace: 'on-first-retry',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure'
  },
  projects: [
    {
      name: 'chromium',
      use: { ...devices['Desktop Chrome'] },
    },
    {
      name: 'firefox',
      use: { ...devices['Desktop Firefox'] },
    },
    {
      name: 'webkit',
      use: { ...devices['Desktop Safari'] },
    },
    {
      name: 'Mobile Chrome',
      use: { ...devices['Pixel 5'] },
    },
    {
      name: 'Mobile Safari',
      use: { ...devices['iPhone 12'] },
    },
  ],
  webServer: {
    command: 'npm run dev',
    url: 'http://localhost:3000',
    reuseExistingServer: !process.env.CI,
  },
});
```

#### 4.1.2 E2Eãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ãƒ‘ãƒ¼
```typescript
// e2e/helpers/auth.ts
import { Page } from '@playwright/test';

export class AuthHelper {
  constructor(private page: Page) {}

  async login(email: string, password: string) {
    await this.page.goto('/login');
    await this.page.fill('[data-testid="email-input"]', email);
    await this.page.fill('[data-testid="password-input"]', password);
    await this.page.click('[data-testid="login-button"]');
    
    // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã®ç¢ºèª
    await this.page.waitForURL('/dashboard');
    await this.page.waitForSelector('[data-testid="user-menu"]');
  }

  async loginAsAdmin() {
    await this.login('admin@testcompany.com', 'testpassword123');
  }

  async loginAsSales() {
    await this.login('sales@testcompany.com', 'testpassword123');
  }

  async loginAsEngineer() {
    await this.login('engineer@testcompany.com', 'testpassword123');
  }

  async logout() {
    await this.page.click('[data-testid="user-menu"]');
    await this.page.click('[data-testid="logout-button"]');
    await this.page.waitForURL('/login');
  }
}

// e2e/helpers/engineer.ts
export class EngineerHelper {
  constructor(private page: Page) {}

  async createEngineer(engineerData: {
    name: string;
    email: string;
    engineerType: string;
    nearestStation?: string;
  }) {
    await this.page.goto('/engineers');
    await this.page.click('[data-testid="new-engineer-button"]');
    
    // ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›
    await this.page.fill('[data-testid="engineer-name"]', engineerData.name);
    await this.page.fill('[data-testid="engineer-email"]', engineerData.email);
    await this.page.selectOption('[data-testid="engineer-type"]', engineerData.engineerType);
    
    if (engineerData.nearestStation) {
      await this.page.fill('[data-testid="nearest-station"]', engineerData.nearestStation);
    }

    await this.page.click('[data-testid="submit-button"]');
    
    // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºèª
    await this.page.waitForSelector('[data-testid="success-message"]');
  }

  async searchEngineers(searchTerm: string, filters?: {
    status?: string;
    skills?: string[];
  }) {
    await this.page.goto('/engineers');
    
    // æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›
    await this.page.fill('[data-testid="search-input"]', searchTerm);
    
    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š
    if (filters?.status) {
      await this.page.selectOption('[data-testid="status-filter"]', filters.status);
    }
    
    if (filters?.skills) {
      for (const skill of filters.skills) {
        await this.page.fill('[data-testid="skill-filter"]', skill);
        await this.page.keyboard.press('Enter');
      }
    }
    
    // æ¤œç´¢å®Ÿè¡Œ
    await this.page.click('[data-testid="search-button"]');
    await this.page.waitForSelector('[data-testid="engineer-list"]');
  }

  async updateSkillSheet(engineerId: string, skillData: {
    summary: string;
    programmingLanguages: Array<{name: string, level: number}>;
  }) {
    await this.page.goto(`/engineers/${engineerId}/skill-sheet`);
    
    // ã‚µãƒãƒªãƒ¼æ›´æ–°
    await this.page.fill('[data-testid="skill-summary"]', skillData.summary);
    
    // ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªè¿½åŠ 
    for (const lang of skillData.programmingLanguages) {
      await this.page.click('[data-testid="add-programming-language"]');
      await this.page.fill('[data-testid="language-name"]:last-of-type', lang.name);
      await this.page.click(`[data-testid="language-level-${lang.level}"]:last-of-type`);
    }
    
    // ä¿å­˜
    await this.page.click('[data-testid="save-skillsheet"]');
    await this.page.waitForSelector('[data-testid="save-success"]');
  }
}
```

### 4.2 ä¸»è¦E2Eãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

#### 4.2.1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ãƒŠãƒªã‚ª
```typescript
// e2e/user-management.spec.ts
import { test, expect } from '@playwright/test';
import { AuthHelper } from './helpers/auth';

test.describe('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ãƒŠãƒªã‚ª', () => {
  let authHelper: AuthHelper;

  test.beforeEach(async ({ page }) => {
    authHelper = new AuthHelper(page);
  });

  test('ç®¡ç†è€…ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã§ãã‚‹ã“ã¨', async ({ page }) => {
    // ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³
    await authHelper.loginAsAdmin();

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ç”»é¢ã¸
    await page.click('[data-testid="nav-users"]');
    await page.waitForSelector('[data-testid="user-list"]');

    // æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
    await page.click('[data-testid="new-user-button"]');
    
    const newUserData = {
      name: 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼',
      email: 'newuser@testcompany.com',
      roles: ['engineer']
    };

    await page.fill('[data-testid="user-name"]', newUserData.name);
    await page.fill('[data-testid="user-email"]', newUserData.email);
    await page.check('[data-testid="role-engineer"]');
    await page.click('[data-testid="create-user-button"]');

    // ä½œæˆæˆåŠŸã®ç¢ºèª
    await page.waitForSelector('[data-testid="user-created-message"]');
    await expect(page.locator('[data-testid="user-list"]')).toContainText(newUserData.name);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç·¨é›†
    await page.click(`[data-testid="edit-user-${newUserData.email}"]`);
    await page.fill('[data-testid="user-name"]', 'ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆç·¨é›†å¾Œï¼‰');
    await page.check('[data-testid="role-sales"]');
    await page.click('[data-testid="update-user-button"]');

    // ç·¨é›†æˆåŠŸã®ç¢ºèª
    await page.waitForSelector('[data-testid="user-updated-message"]');
    await expect(page.locator('[data-testid="user-list"]')).toContainText('ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆç·¨é›†å¾Œï¼‰');

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
    await page.click(`[data-testid="delete-user-${newUserData.email}"]`);
    await page.click('[data-testid="confirm-delete"]');

    // å‰Šé™¤æˆåŠŸã®ç¢ºèª
    await page.waitForSelector('[data-testid="user-deleted-message"]');
    await expect(page.locator('[data-testid="user-list"]')).not.toContainText('ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆç·¨é›†å¾Œï¼‰');
  });

  test('æ¨©é™ã®ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ã“ã¨', async ({ page }) => {
    // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ãƒ­ã‚°ã‚¤ãƒ³
    await authHelper.loginAsEngineer();

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ç”»é¢ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’è©¦è¡Œ
    await page.goto('/users');
    
    // 403ã‚¨ãƒ©ãƒ¼ã¾ãŸã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await page.waitForURL(/\/(dashboard|403)/);
    
    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="nav-users"]')).not.toBeVisible();
  });
});
```

#### 4.2.2 ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç®¡ç†ã‚·ãƒŠãƒªã‚ª
```typescript
// e2e/engineer-management.spec.ts
import { test, expect } from '@playwright/test';
import { AuthHelper, EngineerHelper } from './helpers';

test.describe('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç®¡ç†ã‚·ãƒŠãƒªã‚ª', () => {
  let authHelper: AuthHelper;
  let engineerHelper: EngineerHelper;

  test.beforeEach(async ({ page }) => {
    authHelper = new AuthHelper(page);
    engineerHelper = new EngineerHelper(page);
  });

  test('å–¶æ¥­æ‹…å½“è€…ãŒã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç™»éŒ²ã‹ã‚‰ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆå®Œæˆã¾ã§è¡Œãˆã‚‹ã“ã¨', async ({ page }) => {
    // å–¶æ¥­æ‹…å½“è€…ãƒ­ã‚°ã‚¤ãƒ³
    await authHelper.loginAsSales();

    // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä½œæˆ
    const engineerData = {
      name: 'E2Eãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢',
      email: 'e2etest@testcompany.com',
      engineerType: 'employee',
      nearestStation: 'æ–°å®¿é§…'
    };

    await engineerHelper.createEngineer(engineerData);

    // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä¸€è¦§ã§ä½œæˆã•ã‚ŒãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ç¢ºèª
    await page.goto('/engineers');
    await expect(page.locator('[data-testid="engineer-list"]')).toContainText(engineerData.name);

    // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è©³ç´°ãƒšãƒ¼ã‚¸ã¸
    await page.click(`text=${engineerData.name}`);
    await page.waitForSelector('[data-testid="engineer-detail"]');

    // ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
    await page.click('[data-testid="tab-skillsheet"]');

    // ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆç·¨é›†
    await page.click('[data-testid="edit-skillsheet"]');

    const skillData = {
      summary: 'ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦5å¹´é–“ã®çµŒé¨“ãŒã‚ã‚Šã¾ã™ã€‚',
      programmingLanguages: [
        { name: 'JavaScript', level: 4 },
        { name: 'TypeScript', level: 3 }
      ]
    };

    await engineerHelper.updateSkillSheet('test-engineer-id', skillData);

    // ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆå®Œæˆã®ç¢ºèª
    await expect(page.locator('[data-testid="skillsheet-status"]')).toContainText('å®Œæˆ');
    await expect(page.locator('[data-testid="skillsheet-summary"]')).toContainText(skillData.summary);
  });

  test('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã“ã¨', async ({ page }) => {
    await authHelper.loginAsSales();

    // æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè¡Œ
    await engineerHelper.searchEngineers('JavaScript', {
      status: 'waiting',
      skills: ['React', 'Node.js']
    });

    // æ¤œç´¢çµæœã®ç¢ºèª
    const results = page.locator('[data-testid="engineer-item"]');
    const count = await results.count();
    expect(count).toBeGreaterThan(0);

    // å„çµæœãŒãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶ã«åˆè‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
    for (let i = 0; i < count; i++) {
      const item = results.nth(i);
      await expect(item.locator('[data-testid="engineer-status"]')).toContainText('å¾…æ©Ÿä¸­');
      await expect(item.locator('[data-testid="engineer-skills"]')).toContainText('JavaScript');
    }
  });

  test('ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒè‡ªåˆ†ã®ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆã‚’æ›´æ–°ã§ãã‚‹ã“ã¨', async ({ page }) => {
    await authHelper.loginAsEngineer();

    // è‡ªåˆ†ã®ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆãƒšãƒ¼ã‚¸ã¸
    await page.click('[data-testid="nav-my-skillsheet"]');
    await page.waitForSelector('[data-testid="skillsheet-form"]');

    // ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆæ›´æ–°
    await page.fill('[data-testid="skill-summary"]', 'æ›´æ–°ã•ã‚ŒãŸã‚¹ã‚­ãƒ«æ¦‚è¦ã§ã™ã€‚');
    
    // ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªè¿½åŠ 
    await page.click('[data-testid="add-skill-button"]');
    await page.fill('[data-testid="skill-name"]:last-of-type', 'Python');
    await page.click('[data-testid="skill-level-3"]:last-of-type');
    
    // ä¿å­˜
    await page.click('[data-testid="save-skillsheet"]');
    await page.waitForSelector('[data-testid="save-success"]');

    // ä¿å­˜ç¢ºèª
    await page.reload();
    await expect(page.locator('[data-testid="skill-summary"]')).toHaveValue('æ›´æ–°ã•ã‚ŒãŸã‚¹ã‚­ãƒ«æ¦‚è¦ã§ã™ã€‚');
    await expect(page.locator('[data-testid="skills-list"]')).toContainText('Python');
  });
});
```

#### 4.2.3 ã‚¢ãƒ—ãƒ­ãƒ¼ãƒç®¡ç†ã‚·ãƒŠãƒªã‚ª
```typescript
// e2e/approach-management.spec.ts
import { test, expect } from '@playwright/test';
import { AuthHelper } from './helpers/auth';

test.describe('ã‚¢ãƒ—ãƒ­ãƒ¼ãƒç®¡ç†ã‚·ãƒŠãƒªã‚ª', () => {
  let authHelper: AuthHelper;

  test.beforeEach(async ({ page }) => {
    authHelper = new AuthHelper(page);
  });

  test('å–¶æ¥­æ‹…å½“è€…ãŒã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ä½œæˆãƒ»é€ä¿¡ã§ãã‚‹ã“ã¨', async ({ page }) => {
    await authHelper.loginAsSales();

    // ã‚¢ãƒ—ãƒ­ãƒ¼ãƒä½œæˆç”»é¢ã¸
    await page.click('[data-testid="nav-approaches"]');
    await page.click('[data-testid="new-approach-button"]');

    // ã‚¢ãƒ—ãƒ­ãƒ¼ãƒä½œæˆãƒ•ã‚©ãƒ¼ãƒ ï¼ˆã‚¹ãƒ†ãƒƒãƒ—1ï¼šå¯¾è±¡é¸æŠï¼‰
    await page.check('[data-testid="target-company"]');
    await page.selectOption('[data-testid="company-select"]', 'client-company-1');
    
    // ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢é¸æŠ
    await page.check('[data-testid="engineer-eng-1"]');
    await page.check('[data-testid="engineer-eng-2"]');
    await page.click('[data-testid="next-step"]');

    // ã‚¹ãƒ†ãƒƒãƒ—2ï¼šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ
    await page.fill('[data-testid="project-name"]', 'Reacté–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ');
    await page.fill('[data-testid="project-description"]', 'React/TypeScriptã‚’ä½¿ç”¨ã—ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º');
    await page.fill('[data-testid="message-content"]', 'ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’å‹Ÿé›†ã—ã¦ãŠã‚Šã¾ã™ã€‚');
    await page.check('[data-testid="contact-email"]');
    await page.click('[data-testid="next-step"]');

    // ã‚¹ãƒ†ãƒƒãƒ—3ï¼šç¢ºèªãƒ»é€ä¿¡
    await expect(page.locator('[data-testid="confirm-company"]')).toContainText('ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­A');
    await expect(page.locator('[data-testid="confirm-engineers"]')).toContainText('2åé¸æŠæ¸ˆã¿');
    await expect(page.locator('[data-testid="confirm-project"]')).toContainText('Reacté–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ');

    await page.click('[data-testid="send-approach"]');

    // é€ä¿¡æˆåŠŸç¢ºèª
    await page.waitForSelector('[data-testid="approach-sent-success"]');
    await expect(page.locator('[data-testid="success-message"]')).toContainText('ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é€ä¿¡ã—ã¾ã—ãŸ');

    // ã‚¢ãƒ—ãƒ­ãƒ¼ãƒå±¥æ­´ã«è¨˜éŒ²ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await page.click('[data-testid="nav-approach-history"]');
    await expect(page.locator('[data-testid="approach-list"] >> nth=0')).toContainText('Reacté–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ');
    await expect(page.locator('[data-testid="approach-status"] >> nth=0')).toContainText('é€ä¿¡æ¸ˆã¿');
  });

  test('å®šæœŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®è¨­å®šãŒã§ãã‚‹ã“ã¨', async ({ page }) => {
    await authHelper.loginAsSales();

    // å®šæœŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒè¨­å®šç”»é¢ã¸
    await page.click('[data-testid="nav-approaches"]');
    await page.click('[data-testid="periodic-approaches-tab"]');
    await page.click('[data-testid="new-periodic-approach"]');

    // å®šæœŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒè¨­å®š
    await page.fill('[data-testid="periodic-name"]', 'æœˆæ¬¡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç´¹ä»‹');
    await page.selectOption('[data-testid="target-company"]', 'client-company-1');
    await page.selectOption('[data-testid="frequency"]', 'monthly');
    await page.selectOption('[data-testid="day-of-month"]', '1');
    
    // å¯¾è±¡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ¡ä»¶è¨­å®š
    await page.check('[data-testid="status-waiting"]');
    await page.fill('[data-testid="skill-filter"]', 'JavaScript');
    await page.keyboard.press('Enter');

    // ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé¸æŠ
    await page.selectOption('[data-testid="email-template"]', 'template-monthly');

    await page.click('[data-testid="create-periodic-approach"]');

    // ä½œæˆæˆåŠŸç¢ºèª
    await page.waitForSelector('[data-testid="periodic-created-success"]');
    await expect(page.locator('[data-testid="periodic-list"]')).toContainText('æœˆæ¬¡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç´¹ä»‹');
    await expect(page.locator('[data-testid="periodic-status"]')).toContainText('æœ‰åŠ¹');
  });
});
```

## 5. å—å…¥ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### 5.1 å—å…¥ãƒ†ã‚¹ãƒˆåŸºæº–
```typescript
// tests/acceptance/criteria.ts

export interface AcceptanceCriteria {
  story: string;
  criteria: Array<{
    given: string;
    when: string;
    then: string;
    testMethod: 'automated' | 'manual';
  }>;
}

export const acceptanceCriteria: AcceptanceCriteria[] = [
  {
    story: 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç™»éŒ²æ©Ÿèƒ½',
    criteria: [
      {
        given: 'ç®¡ç†è€…ã¾ãŸã¯å–¶æ¥­æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹',
        when: 'å¿…è¦ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç™»éŒ²ã‚’å®Ÿè¡Œã™ã‚‹',
        then: 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæ­£å¸¸ã«ç™»éŒ²ã•ã‚Œã€ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹',
        testMethod: 'automated'
      },
      {
        given: 'åŒã˜ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒæ—¢ã«å­˜åœ¨ã™ã‚‹',
        when: 'é‡è¤‡ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç™»éŒ²ã‚’è©¦è¡Œã™ã‚‹',
        then: 'ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã€ç™»éŒ²ãŒæ‹’å¦ã•ã‚Œã‚‹',
        testMethod: 'automated'
      },
      {
        given: 'å¿…é ˆé …ç›®ãŒæœªå…¥åŠ›ã®çŠ¶æ…‹ã§',
        when: 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç™»éŒ²ã‚’è©¦è¡Œã™ã‚‹',
        then: 'ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã€ç™»éŒ²ãŒå®Œäº†ã—ãªã„',
        testMethod: 'automated'
      }
    ]
  },
  {
    story: 'ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆç®¡ç†æ©Ÿèƒ½',
    criteria: [
      {
        given: 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æœ¬äººãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹',
        when: 'è‡ªåˆ†ã®ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆæƒ…å ±ã‚’æ›´æ–°ã™ã‚‹',
        then: 'å¤‰æ›´ãŒä¿å­˜ã•ã‚Œã€ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æœ€æ–°æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹',
        testMethod: 'automated'
      },
      {
        given: 'ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆãŒå®ŒæˆçŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹',
        when: 'å–å¼•å…ˆä¼æ¥­ãŒãã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’é–²è¦§ã™ã‚‹',
        then: 'å®Œæˆã—ãŸã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆæƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹',
        testMethod: 'manual'
      }
    ]
  },
  {
    story: 'ã‚¢ãƒ—ãƒ­ãƒ¼ãƒæ©Ÿèƒ½',
    criteria: [
      {
        given: 'å–¶æ¥­æ‹…å½“è€…ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãŠã‚Šã€ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨å–å¼•å…ˆä¼æ¥­ãŒå­˜åœ¨ã™ã‚‹',
        when: 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’é¸æŠã—ã¦ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’é€ä¿¡ã™ã‚‹',
        then: 'å–å¼•å…ˆä¼æ¥­ã«ãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œã€ã‚¢ãƒ—ãƒ­ãƒ¼ãƒå±¥æ­´ã«è¨˜éŒ²ã•ã‚Œã‚‹',
        testMethod: 'automated'
      },
      {
        given: 'å®šæœŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹',
        when: 'è¨­å®šã•ã‚ŒãŸæ—¥æ™‚ã«ãªã‚‹',
        then: 'è‡ªå‹•çš„ã«ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œã‚‹',
        testMethod: 'manual'
      }
    ]
  }
];
```

### 5.2 å—å…¥ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè¨ˆç”»
```markdown
# å—å…¥ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè¨ˆç”»æ›¸

## å®Ÿè¡Œæ¦‚è¦
- **å®Ÿè¡ŒæœŸé–“**: é–‹ç™ºå®Œäº†å¾Œ 1é€±é–“
- **å®Ÿè¡Œç’°å¢ƒ**: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
- **å‚åŠ è€…**: 
  - é–‹ç™ºãƒãƒ¼ãƒ ï¼ˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œãƒ»ã‚µãƒãƒ¼ãƒˆï¼‰
  - ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼ï¼ˆå—å…¥åˆ¤å®šï¼‰
  - ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ä»£è¡¨ï¼ˆå®Ÿéš›ã®æ“ä½œç¢ºèªï¼‰

## å®Ÿè¡Œæ‰‹é †

### Phase 1: è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆ1æ—¥ç›®ï¼‰
1. E2Eãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆå®Ÿè¡Œ
2. APIçµåˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. è‡ªå‹•ãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒ“ãƒ¥ãƒ¼

### Phase 2: æ‰‹å‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆ2-4æ—¥ç›®ï¼‰
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ªãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
2. ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§ãƒ†ã‚¹ãƒˆ
3. ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œãƒ†ã‚¹ãƒˆ
4. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
5. ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

### Phase 3: å—å…¥åˆ¤å®šï¼ˆ5æ—¥ç›®ï¼‰
1. ãƒ†ã‚¹ãƒˆçµæœç·åˆè©•ä¾¡
2. æœªè§£æ±ºå•é¡Œã®å„ªå…ˆåº¦åˆ¤å®š
3. å—å…¥åŸºæº–é©åˆç¢ºèª
4. æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹å¯å¦åˆ¤å®š
```

## 6. è‡ªå‹•ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 6.1 ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
```yaml
# .github/workflows/test-pipeline.yml
name: Test Pipeline

on:
  pull_request:
    branches: [main, develop]
  push:
    branches: [main, develop]

jobs:
  unit-tests:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: |
        cd backend && npm ci
        cd ../frontend && npm ci
    
    - name: Run unit tests
      run: |
        cd backend && npm run test:unit -- --coverage
        cd ../frontend && npm run test:unit -- --coverage
    
    - name: Upload coverage reports
      uses: codecov/codecov-action@v3
      with:
        directory: ./coverage

  integration-tests:
    needs: unit-tests
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: password
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
      redis:
        image: redis:7
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
    - uses: actions/checkout@v