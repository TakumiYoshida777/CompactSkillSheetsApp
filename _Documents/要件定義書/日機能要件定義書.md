# 非機能要件詳細仕様書

## 1. 性能要件

### 1.1 レスポンスタイム要件
| 処理種別 | 目標値 | 最大許容値 | 測定条件 |
|---------|--------|-----------|----------|
| 画面表示（通常操作） | 0.5秒以内 | 1.0秒以内 | 95%のリクエスト |
| 初回画面読み込み | 2.0秒以内 | 3.0秒以内 | 95%のリクエスト |
| 検索処理 | 1.0秒以内 | 2.0秒以内 | 1,000件以下の結果 |
| 大量検索処理 | 3.0秒以内 | 5.0秒以内 | 10,000件以下の結果 |
| ファイルアップロード | 5.0秒以内 | 10.0秒以内 | 10MB以下のファイル |
| レポート生成 | 10.0秒以内 | 30.0秒以内 | 月次レポート等 |

### 1.2 スループット要件
| 項目 | 目標値 | 備考 |
|------|--------|------|
| 同時接続ユーザー数 | 1,000ユーザー | ピーク時想定 |
| リクエスト処理能力 | 100リクエスト/秒 | 平均的な負荷 |
| ピーク時処理能力 | 500リクエスト/秒 | 瞬間的な高負荷 |
| データベース接続数 | 200接続 | 接続プール上限 |

### 1.3 データ量要件
| 項目 | 想定値 | 上限値 | 備考 |
|------|--------|--------|------|
| 総企業数 | 1,000社 | 10,000社 | マルチテナント |
| 1企業あたりエンジニア数 | 50名 | 6,000名 | 契約上限 |
| 総エンジニア数 | 50,000名 | 60,000,000名 | システム全体 |
| スキルシート1件あたりデータサイズ | 50KB | 100KB | 画像含む |
| 1企業あたり取引先数 | 20社 | 100社 | - |
| 月間アプローチメール数 | 10,000件 | 100,000件 | システム全体 |

## 2. 可用性・信頼性要件

### 2.1 可用性要件
| 項目 | 目標値 | 測定期間 | 備考 |
|------|--------|----------|------|
| システム稼働率 | 99.9% | 月次 | SLA基準 |
| 年間ダウンタイム | 8.77時間以内 | 年次 | 計画停止含まず |
| 計画停止時間 | 月4時間以内 | 月次 | メンテナンス等 |
| 計画停止通知 | 72時間前 | - | 事前通知必須 |

### 2.2 復旧要件
| 項目 | 目標値 | 備考 |
|------|--------|------|
| RTO（復旧時間目標） | 4時間以内 | 障害発生から復旧まで |
| RPO（復旧ポイント目標） | 1時間以内 | データ損失許容範囲 |
| 障害検知時間 | 5分以内 | 自動監視による |
| 障害対応開始時間 | 15分以内 | 検知から対応開始まで |

### 2.3 バックアップ要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| フルバックアップ | 日次実行（深夜2:00-4:00） | 全データ対象 |
| 差分バックアップ | 6時間間隔 | 変更データのみ |
| トランザクションログ | 15分間隔 | リアルタイム復旧用 |
| バックアップ保持期間 | 30日（日次）、7日（差分） | - |
| 遠隔地保存 | フルバックアップのみ | DR対応 |
| 復旧テスト | 月次実行 | 第3土曜日実施 |

## 3. セキュリティ要件

### 3.1 認証・認可要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| パスワード最小文字数 | 12文字以上 | - |
| 文字種要件 | 英大文字・小文字・数字・記号の3種以上 | - |
| パスワード有効期限 | 90日 | 強制更新 |
| パスワード履歴管理 | 過去12回分の再利用禁止 | - |
| アカウントロックアウト | 10回失敗で段階的ロック | 30分→2時間→管理者解除 |
| 多要素認証 | 管理者権限は必須 | TOTP推奨 |

### 3.2 セッション管理要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| セッション有効期限 | 8時間（アクティブ時） | 業務時間想定 |
| 非アクティブタイムアウト | 30分 | 自動ログアウト |
| セッションID長 | 128bit以上 | セキュア乱数生成 |
| 同時ログイン制限 | 3セッション/ユーザー | - |
| セッションハイジャック対策 | IPアドレス・User-Agent検証 | - |

### 3.3 データ暗号化要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| 保存データ暗号化 | AES-256（データベース・ファイル） | - |
| 転送データ暗号化 | TLS 1.3以上 | HTTPS必須 |
| パスワードハッシュ | bcrypt（cost=12以上） | - |
| 暗号化キー管理 | HSM または KMS使用 | - |
| 鍵ローテーション | 年次実行 | - |

### 3.4 アクセス制御要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| IPアドレス制限 | 企業単位で設定可能 | オプション機能 |
| アクセス権限検証 | 全API・画面で実装 | 最小権限原則 |
| 権限昇格防止 | 権限変更は管理者のみ | - |
| テナント分離 | 完全分離（データ・処理） | - |

### 3.5 ログ・監査要件
| ログ種別 | 保持期間 | 内容 | 備考 |
|----------|----------|------|------|
| 認証ログ | 3年 | ログイン・ログアウト・失敗 | 法的要件 |
| 操作ログ | 3年 | CRUD操作・重要操作 | 監査証跡 |
| アクセスログ | 1年 | 全HTTPリクエスト | 性能分析用 |
| エラーログ | 1年 | システムエラー・例外 | 障害分析用 |
| セキュリティログ | 3年 | 不正アクセス・権限違反 | インシデント対応 |

## 4. 性能監視・アラート要件

### 4.1 監視項目
| 監視対象 | 警告閾値 | 危険閾値 | 確認間隔 |
|----------|----------|----------|----------|
| CPU使用率 | 70% | 85% | 1分 |
| メモリ使用率 | 75% | 90% | 1分 |
| ディスク使用率 | 80% | 90% | 5分 |
| ディスクI/O | 80% | 95% | 1分 |
| ネットワーク使用率 | 70% | 85% | 1分 |
| レスポンスタイム | 1.0秒 | 2.0秒 | 1分 |
| エラー率 | 1% | 5% | 1分 |
| 同時接続数 | 800 | 950 | 1分 |

### 4.2 アラート通知
| 項目 | 仕様 | 備考 |
|------|------|------|
| 通知手段 | メール・Slack・SMS | 重要度別 |
| 通知対象者 | 運用チーム・開発チーム・責任者 | エスカレーション |
| 通知間隔 | 初回即時・再通知15分間隔 | スパム防止 |
| 復旧通知 | 自動送信 | - |

## 5. 拡張性要件

### 5.1 水平拡張要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| Webサーバー | ロードバランサー対応 | オートスケーリング |
| アプリケーションサーバー | ステートレス設計 | セッション外部化 |
| データベース | リードレプリカ対応 | 読み取り負荷分散 |
| ファイルストレージ | オブジェクトストレージ使用 | クラウド対応 |

### 5.2 垂直拡張要件
| 項目 | 最小構成 | 推奨構成 | 最大構成 |
|------|----------|----------|----------|
| CPU | 4コア | 8コア | 32コア |
| メモリ | 8GB | 16GB | 128GB |
| ストレージ | 100GB | 500GB | 10TB |
| ネットワーク | 1Gbps | 10Gbps | 100Gbps |

## 6. 保守性要件

### 6.1 システム更新要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| セキュリティパッチ | 月次適用 | 緊急時は即座 |
| 機能アップデート | 四半期リリース | - |
| ダウンタイム | 4時間以内/月 | 計画停止 |
| ロールバック時間 | 30分以内 | - |
| ブルーグリーンデプロイ | 本番環境で実装 | ゼロダウンタイム |

### 6.2 運用監視要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| 24時間監視 | 自動監視システム | 平日日中は有人 |
| ヘルスチェック | 1分間隔 | 全サービス対象 |
| 死活監視 | 外部監視サービス併用 | - |
| 容量監視 | 日次レポート | 成長トレンド分析 |

## 7. 互換性要件

### 7.1 ブラウザ対応
| ブラウザ | 対応バージョン | 備考 |
|----------|----------------|------|
| Chrome | 最新2バージョン | 推奨ブラウザ |
| Safari | 最新2バージョン | Mac・iPhone対応 |
| Firefox | 最新2バージョン | - |
| Edge | 最新2バージョン | IE非対応 |

### 7.2 デバイス対応
| デバイス | 解像度 | 備考 |
|----------|--------|------|
| デスクトップPC | 1920×1080以上 | 推奨環境 |
| ノートPC | 1366×768以上 | 最小対応 |
| タブレット | 1024×768以上 | 参照機能のみ |
| スマートフォン | 375×667以上 | レスポンシブ対応 |

### 7.3 レスポンシブデザイン要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| ブレークポイント | 768px（タブレット）、375px（スマートフォン） | Bootstrap準拠 |
| レイアウト調整 | フレックスボックス・グリッドシステム | - |
| 画像最適化 | デバイス別解像度対応 | WebP形式推奨 |
| フォントサイズ | 16px以上（スマートフォン） | 可読性確保 |
| タッチターゲット | 44px以上 | Apple HIG準拠 |
| ナビゲーション | ハンバーガーメニュー | スマートフォン時 |

### 7.4 モバイル性能要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| ページサイズ | 500KB以下/ページ | 3G回線対応 |
| 初回読み込み | 3秒以内 | 3G回線想定 |
| 画像圧縮 | 70%品質、WebP対応 | - |
| CSS/JS最小化 | Gzip圧縮必須 | - |
| キャッシュ戦略 | 静的リソース1週間 | - |
| オフライン対応 | Service Worker実装 | 基本機能のみ |

### 7.5 モバイル操作性要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| タップ領域最小サイズ | 44×44px | - |
| スワイプ操作 | 左右スワイプでページ遷移 | - |
| 片手操作対応 | 重要機能は画面下部配置 | - |
| 入力支援 | 適切なinputtype設定 | tel、email等 |
| バーチャルキーボード | レイアウト崩れ防止 | viewport調整 |
| 長押し操作 | コンテキストメニュー表示 | - |

## 8. 法的・コンプライアンス要件

### 8.1 個人情報保護
| 項目 | 仕様 | 備考 |
|------|------|------|
| 法的準拠 | 個人情報保護法・GDPR | - |
| データ保管場所 | 日本国内データセンター | - |
| データ転送 | 国外転送時は適切な措置 | - |
| アクセス権管理 | 最小権限・定期見直し | - |
| データ削除 | 要求から30日以内 | 忘れられる権利 |

### 8.2 監査要件
| 項目 | 仕様 | 備考 |
|------|------|------|
| セキュリティ監査 | 年次実施 | 第三者機関 |
| 脆弱性診断 | 四半期実施 | - |
| ペネトレーションテスト | 年次実施 | - |
| コンプライアンスチェック | 半期実施 | 内部監査 |

## 9. 災害対策要件

### 9.1 事業継続計画
| 項目 | 仕様 | 備考 |
|------|------|------|
| DR サイト | 200km以上離隔 | 地理的分散 |
| データレプリケーション | リアルタイム同期 | RPO 1時間以内 |
| 切替時間 | RTO 4時間以内 | 手動切替 |
| 復旧訓練 | 半期実施 | - |

### 9.2 データ保護
| 項目 | 仕様 | 備考 |
|------|------|------|
| 地理的分散バックアップ | 3箇所以上 | - |
| 長期保管 | テープ・クラウド | 7年保管 |
| 暗号化保管 | AES-256 | - |
| 完全性検証 | 月次実行 | チェックサム |

## 10. 品質要件

### 10.1 可用性品質
- **MTBF（平均故障間隔）**: 2,160時間以上（3ヶ月）
- **MTTR（平均復旧時間）**: 4時間以内
- **可用性**: 99.9%以上（月次測定）

### 10.2 性能品質
- **レスポンス時間の安定性**: 標準偏差 ±20%以内
- **スループットの一貫性**: ピーク時も平均値の80%以上維持
- **リソース使用効率**: CPU・メモリ使用率80%以下で安定動作

### 10.3 セキュリティ品質
- **脆弱性スコア**: CVSS 7.0以上の脆弱性ゼロ維持
- **セキュリティインシデント**: 年間発生件数ゼロ目標
- **監査適合率**: 100%（重要項目）、95%以上（全項目）