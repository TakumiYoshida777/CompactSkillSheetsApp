# ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆæ›¸ - ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

## 1. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥æ¦‚è¦

### 1.1 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ–¹é‡

```
ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥:
â”Œâ”€ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ  â”€â”    â”Œâ”€ ç§»è¡Œå‡¦ç† â”€â”    â”Œâ”€ æ–°ã‚·ã‚¹ãƒ†ãƒ  â”€â”
â”‚  - Excelç®¡ç†    â”‚â”€â”€â”€â–¶â”‚ ãƒ‡ãƒ¼ã‚¿æŠ½å‡º   â”‚â”€â”€â”€â–¶â”‚ SkillSheetDB â”‚
â”‚  - CSVç®¡ç†      â”‚    â”‚ å¤‰æ›ãƒ»æ¤œè¨¼   â”‚    â”‚ çµ±åˆç®¡ç†     â”‚
â”‚  - å€‹åˆ¥DB      â”‚    â”‚ é‡è¤‡æ’é™¤     â”‚    â”‚ APIé€£æº      â”‚
â”‚  - æ‰‹ä½œæ¥­ç®¡ç†   â”‚    â”‚ å“è³ªç¢ºä¿     â”‚    â”‚ Web UI       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç§»è¡ŒåŸå‰‡:
1. ã‚¼ãƒ­ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ç§»è¡Œ
2. ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ä¿è¨¼
3. æ®µéšçš„ç§»è¡Œå®Ÿæ–½
4. å®Œå…¨ãªãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å¯¾å¿œ
5. ç§»è¡ŒçŠ¶æ³ã®å¯è¦–åŒ–
```

### 1.2 ç§»è¡Œå¯¾è±¡ãƒ‡ãƒ¼ã‚¿

| ãƒ‡ãƒ¼ã‚¿ç¨®åˆ¥ | ç§»è¡Œå…ƒ | ç§»è¡Œå…ˆ | å„ªå…ˆåº¦ | å‚™è€ƒ |
|------------|--------|--------|--------|------|
| ä¼æ¥­æƒ…å ± | Excel/CSV | companies ãƒ†ãƒ¼ãƒ–ãƒ« | High | ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ |
| ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢åŸºæœ¬æƒ…å ± | Excel/CSV | engineers ãƒ†ãƒ¼ãƒ–ãƒ« | High | å€‹äººæƒ…å ±å«ã‚€ |
| ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆ | Excel/Word | skill_sheets ãƒ†ãƒ¼ãƒ–ãƒ« | High | éæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ |
| ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå±¥æ­´ | Excel/CSV | project_experiences ãƒ†ãƒ¼ãƒ–ãƒ« | Medium | ä»»æ„é …ç›®ã‚ã‚Š |
| ã‚¢ãƒ—ãƒ­ãƒ¼ãƒå±¥æ­´ | ãƒ¡ãƒ¼ãƒ«/Excel | approaches ãƒ†ãƒ¼ãƒ–ãƒ« | Medium | æ•£åœ¨ãƒ‡ãƒ¼ã‚¿ |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ | CSV/æ‰‹å‹• | users ãƒ†ãƒ¼ãƒ–ãƒ« | High | èªè¨¼æƒ…å ± |
| æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ­ãƒ¼ã‚«ãƒ«/å…±æœ‰ | MinIO Storage | Medium | ãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œ |

## 2. ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ»è¨­è¨ˆ

### 2.1 æ—¢å­˜ãƒ‡ãƒ¼ã‚¿åˆ†æ

#### ä¼æ¥­ãƒ‡ãƒ¼ã‚¿åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```python
#!/usr/bin/env python3
# scripts/analyze_existing_data.py

import pandas as pd
import numpy as np
import json
import re
from pathlib import Path
from typing import Dict, List, Any

class DataAnalyzer:
    def __init__(self, data_path: str):
        self.data_path = Path(data_path)
        self.analysis_result = {}
    
    def analyze_company_data(self, file_path: str) -> Dict[str, Any]:
        """ä¼æ¥­ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ"""
        print(f"ğŸ“Š ä¼æ¥­ãƒ‡ãƒ¼ã‚¿åˆ†æé–‹å§‹: {file_path}")
        
        # Excel/CSVãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
        if file_path.endswith('.xlsx'):
            df = pd.read_excel(file_path)
        else:
            df = pd.read_csv(file_path, encoding='utf-8-sig')
        
        analysis = {
            'total_records': len(df),
            'columns': list(df.columns),
            'data_types': df.dtypes.to_dict(),
            'missing_values': df.isnull().sum().to_dict(),
            'duplicate_records': df.duplicated().sum(),
            'unique_companies': df['company_name'].nunique() if 'company_name' in df.columns else 0
        }
        
        # ä¼æ¥­åã®æ­£è¦åŒ–åˆ†æ
        if 'company_name' in df.columns:
            company_names = df['company_name'].dropna().unique()
            analysis['company_variations'] = self._analyze_company_name_variations(company_names)
        
        # ãƒ¡ãƒ¼ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†æ
        if 'email' in df.columns:
            domains = df['email'].dropna().str.extract(r'@(.+)')[0].value_counts()
            analysis['email_domains'] = domains.head(10).to_dict()
        
        print(f"âœ… ä¼æ¥­ãƒ‡ãƒ¼ã‚¿åˆ†æå®Œäº† - ä»¶æ•°: {analysis['total_records']}")
        return analysis
    
    def analyze_engineer_data(self, file_path: str) -> Dict[str, Any]:
        """ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ"""
        print(f"ğŸ“Š ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ‡ãƒ¼ã‚¿åˆ†æé–‹å§‹: {file_path}")
        
        if file_path.endswith('.xlsx'):
            df = pd.read_excel(file_path)
        else:
            df = pd.read_csv(file_path, encoding='utf-8-sig')
        
        analysis = {
            'total_records': len(df),
            'columns': list(df.columns),
            'missing_values': df.isnull().sum().to_dict(),
            'duplicate_emails': df['email'].duplicated().sum() if 'email' in df.columns else 0,
            'skill_variations': self._analyze_skill_variations(df) if any('skill' in col.lower() for col in df.columns) else {}
        }
        
        # å¹´é½¢ãƒ»çµŒé¨“å¹´æ•°åˆ†æ
        for col in ['age', 'experience_years', 'å¹´é½¢', 'çµŒé¨“å¹´æ•°']:
            if col in df.columns:
                analysis[f'{col}_stats'] = {
                    'mean': df[col].mean(),
                    'median': df[col].median(),
                    'min': df[col].min(),
                    'max': df[col].max(),
                    'std': df[col].std()
                }
        
        print(f"âœ… ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ‡ãƒ¼ã‚¿åˆ†æå®Œäº† - ä»¶æ•°: {analysis['total_records']}")
        return analysis
    
    def analyze_skillsheet_data(self, directory_path: str) -> Dict[str, Any]:
        """ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã®åˆ†æ"""
        print(f"ğŸ“Š ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿åˆ†æé–‹å§‹: {directory_path}")
        
        skillsheet_dir = Path(directory_path)
        files = list(skillsheet_dir.glob('**/*'))
        
        analysis = {
            'total_files': len(files),
            'file_types': {},
            'file_sizes': [],
            'skill_keywords': {}
        }
        
        # ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥åˆ†æ
        for file in files:
            if file.is_file():
                ext = file.suffix.lower()
                analysis['file_types'][ext] = analysis['file_types'].get(ext, 0) + 1
                analysis['file_sizes'].append(file.stat().st_size)
        
        # Excel/Wordãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¹ã‚­ãƒ«æƒ…å ±æŠ½å‡º
        skill_keywords = self._extract_skill_keywords(files)
        analysis['skill_keywords'] = skill_keywords
        
        print(f"âœ… ã‚¹ã‚­ãƒ«ã‚·ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿åˆ†æå®Œäº† - ãƒ•ã‚¡ã‚¤ãƒ«æ•°: {analysis['total_files']}")
        return analysis
    
    