# ClaudeCode対応 SESスキル管理システム 開発指針書  
**必須**: 本書を全て読み、理解した上で作業を開始すること。
**必須**: 本書は全て必須で対応適応すること。

---

## 0. 重要な制約

1. **Serenaとの連携**
   - 必ずSerenaと協力して作業を進めること。

2. **事前理解**
   - 作業前に必ず`CompactSkillSheetsApp/_Documents`ディレクトリ内の全ファイルを理解すること。
   - 行動前に`CompactSkillSheetsApp/_Knowledge`ディレクトリも読み込むこと。
   - `CompactSkillSheetsApp/README.md`の環境構造を理解すること。
      - 同じPCで複数環境が動いている前提であることを理解すること
   - 不具合を修正する際は`Project/Dev2_CompactSkillSheetsApp/Dev2_CompactSkillSheetsApp/backend/Logs`ディレクトリの最新情報を読み込んで、ログ出力されているか確認し、修正を行うこと。
   - 「理解して」と言われたら、_Documents,_Knowledge,README.md,を改めて読み直し完全に理解すること
   - API通信は必ずTanStack Queryを使用すること（https://tanstack.com/query/latest）
   - 既存機能を壊さないこと
   - **必須**開発環境DockerのPort設定は壊さないこと

3. **実装ポリシー**
   - Kent Beck氏のテスト駆動開発（TDD）を実践。
   - 暫定・一時対応は禁止。本番運用に耐えうる実装のみ行う。
   - UUIDは絶対に使用しない（IDは他の方法で管理）。
   - TypeScriptのany型は原則使用禁止（型安全性を確保すること）。

4. **認証機能**
   - `_Documents/開発ガイド/認証実装ガイドライン.md`に従うこと。

5. **コンテナ管理**
   - 重複コンテナが存在する場合は「重複したコンテナが存在します。起動しているコンテナをクローズしてください」と指示者に伝える。

6. **コミットルール**
   - 自分が用意したTODOを1つ完了するごとにGitコミットを行う。

7. ChatGPTへ質問
   - 「ChatGPTへ質問してください」と言われたら以下を実施すること
     - README.mdに書かれている複数の環境が同時に同じPCで動作していることを前提として冒頭に記載すること
     - /Users/takumi/workspace/Project/Dev2_CompactSkillSheetsApp/Dev2_CompactSkillSheetsApp/_Features/Bug/Promptディレクトリに質問用のプロンプトをmdファイル形式で記載すること
     - 質問はAIが理解できる粒度で記載すること
     

---

## 1. ChatGPTへの質問手順
- 「ChatGPTに質問してください」と指示された場合は、`_Features/Prompt`ディレクトリにMarkdown形式で記載。
- プロンプト冒頭に必ず「AIが誤解しない粒度で回答してください」と記載。

---

## 2. 基本方針

### 2.1 言語・地域
- **使用言語**: 日本語（全ての対話・実装・ドキュメント）
- **対象地域**: 日本
- **多言語対応**: 不要

### 2.2 プロジェクト理解の前提
- `_Documents`ディレクトリ内のファイルを完全に理解してから作業する。
- 仕様は随時更新されるため、最新状態を確認すること。

### 2.3 作業品質管理
- 作業完了後はセルフレビューを行い、不整合・過不足・要件未達・致命的ミスがないことを確認。
- AIが誤解しない表現を心がける。

---

## 3. Git・バージョン管理

### 3.1 必須事項
- Git CLIを使用（GUI禁止）。
- featureブランチは最新`develop`から作成。
- GitHubへの入力は全て日本語。

### 3.2 作業フロー
1. `origin develop`をPull
2. Issue作成 → Pull Requestと紐付け
3. ブランチ名はIssueが分かるように命名

### 3.3 Pull Request条件
- 1PR = 1機能
- 意味のあるコミット単位
- 動作確認・テスト済み（再現手順を明記）
- コードレビュー1名以上取得
- 影響範囲のバグ混入なし

## 4. 実装・コーディングルール

### 4.1 原則
- Kent BeckのTDD
- マーチン・ファウラーのリファクタリング思想
- DRY / YAGNI / SOLID / ボーイスカウトの法則
- リーダブルコード

### 4.2 テスト
- カバレッジ80%以上（FE/BEとも）
- コミット前に全テスト実行 → グリーン必須
- 新規コンポーネントは必ずテスト作成
- テスト結果は`_Test`ディレクトリに保存（PR番号＋タイトルのファイル名）
- カバレッジ分析レポートは`_Test/CoverageReports`ディレクトリに保存

### 4.3 コメント・命名
- コメントは日本語
- 不要コードや`console.log`削除
- 命名は責務が明確になるように

---

## 5. フロントエンド開発

### 5.1 技術スタック
| 項目 | 技術 |
|------|------|
| フレームワーク | React.js + TypeScript |
| UI | Ant Design |
| 状態管理 | Zustand |
| ルーティング | React Router |
| HTTP | TanStack Query + Axios |
| CSS | Tailwind CSS / Styled Components |
| ビルド | Vite / Webpack |
| テスト | Jest + React Testing Library |

### 5.2 設計指針
- `_Documents/デザイン定義書.md`を基準
- レスポンシブ・アクセシビリティ（WCAG 2.1 AA）

---

## 6. バックエンド開発

### 6.1 コード品質ツール
```bash
# フォーマット
uv run --frozen ruff format .
uv run --frozen ruff check . --fix

# 型チェック
uv run --frozen pyright

# テスト
PYTEST_DISABLE_PLUGIN_AUTOLOAD="" uv run --frozen pytest

## 7. データベース設計

- UUID使用禁止
- 奥野幹也氏の思想に基づく正規化
- 保守性・可読性・性能重視
- 修正前はバックアップを`backup`ディレクトリに保存

---

## 8. Docker・環境管理
- Docker操作は`README.md`を参照
- 動作確認はDocker上で実施
- `npm run dev`禁止

---

## 9. エラー対応
1. `_Knowledge`で解決可能か確認
2. `backend/logs`でエラーログ確認
3. 根本的解決策を思考（クリティカルシンキング）
4. 実装方針決定と影響範囲洗い出し

- 問題記録は`_Features/Bug`ディレクトリに日付＋ファイル名で保存
- 解決後は`_Knowledge`に登録

## 10. ファイル・ディレクトリ管理

- 一時ファイルは`./tmp`（用途・使用時期明記）
- 仕様変更前は`Old`に日付＋ファイル名で保存
- `_Documents` = 全ドキュメント
- `_Features` = 実装予定
- `_RefactoringPlans` = リファクタリング計画
- `Done` = 実装完了

---

## 11. セルフレビュー項目

- **技術的整合性**: バグ・セキュリティホールなし
- **可読性・保守性**: AIが誤解しない構成
- **要件適合性**: 仕様・期待動作・エラーハンドリング確認

---

## 12. 作業開始時確認

- 指示前に必ず「Gitの状態は宜しいですか？」と質問
- 「いいえ」の場合は中断
- 不明点・選択肢複数の場合は質問

---

## 13. 本番リリース前準備
- `_本番リリース前準備`ディレクトリに対応事項をMarkdownで随時記載

## 14. まとめ

本指針書は、ClaudeCodeが日本人向けSESスキル管理システムを開発する際の包括的ガイドラインである。  
すべてのルールを遵守し、高品質で保守性・拡張性に優れたシステムを構築することを目的とする。

特に重要なポイントは以下の通り。

1. **事前理解**
   - プロジェクトナレッジを完全に理解した上で作業すること。
   - `_Documents`および`_Knowledge`の内容を必ず参照する。

2. **品質確保**
   - Kent BeckのTDDを実践すること。
   - テストカバレッジはフロントエンド・バックエンドともに80%以上。
   - セルフレビューで不整合や要件未達を排除する。

3. **チーム連携**
   - Git運用ルールを遵守し、日本語で明確にコミュニケーションする。
   - PRは1機能単位で、テスト済みかつ再現手順を明記する。

4. **継続的改善**
   - ボーイスカウトの法則、DRY、YAGNI、SOLIDなどの原則を実践。
   - 必要に応じてリファクタリング計画を`_RefactoringPlans`に記載する。

---

## 15. 運用上の注意

- 作業中に不明点や仕様のあいまいさが発生した場合は必ず指示者に確認する。
- 暫定的・一時的なコードを残さない。
- 本番環境で動作可能な状態を常に維持する。

---

## 16. ドキュメント更新ルール

- 本書の改訂は、必ず履歴を残す（`Old`ディレクトリに保存）。
- 更新内容はチーム全員に共有し、理解を確認する。
- `CLAUDE.md`の改訂版は常に最新の仕様を反映すること。

---

## 17. 禁止事項（再掲）

- UUIDの使用
- 暫定的・一時的な対応
- 推測に基づく実装
- `npm run dev`による実行
- 広すぎる`Exception`キャッチ
- GUIでのGit操作