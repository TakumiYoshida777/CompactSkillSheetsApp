# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

**ä½œæˆæ—¥**: 2025-08-26  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: SESã‚¹ã‚­ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ   
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### 1. ç’°å¢ƒè¨­å®š
- [ ] `.env.production`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šå€¤ã‚’ç¢ºèª
  - [ ] `DATABASE_URL`ã‚’æœ¬ç•ªDBã«å¤‰æ›´
  - [ ] `JWT_SECRET`ã‚’å¼·åŠ›ãªãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ã«å¤‰æ›´
  - [ ] `CORS_ORIGIN`ã‚’æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³ã«å¤‰æ›´
  - [ ] `FRONTEND_URL`ã‚’æœ¬ç•ªURLã«å¤‰æ›´
  - [ ] SMTPã‚µãƒ¼ãƒãƒ¼è¨­å®šã‚’æœ¬ç•ªç”¨ã«æ›´æ–°
- [ ] `USE_NEW_BP_API=true`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
- [ ] `NODE_ENV=production`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æº–å‚™
- [ ] æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—
- [ ] Prismaãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œ
  ```bash
  npx prisma migrate deploy
  ```
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
  ```bash
  npx ts-node scripts/migrate-business-partners.ts migrate
  ```
- [ ] ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã‚’ç¢ºèª

### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
- [ ] JWTç§˜å¯†éµãŒååˆ†ã«å¼·åŠ›ã‹ç¢ºèª
- [ ] ç’°å¢ƒå¤‰æ•°ã«æ©Ÿå¯†æƒ…å ±ãŒç›´æ¥è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèª
- [ ] CORSè¨­å®šãŒé©åˆ‡ã‹ç¢ºèª
- [ ] èªè¨¼ãƒ»èªå¯ãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] XSSå¯¾ç­–ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### 4. ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ç¢ºèª
- [x] æš«å®šå®Ÿè£…ã‚³ãƒ¼ãƒ‰ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
  - [x] `partnerListService.ts`å‰Šé™¤æ¸ˆã¿
  - [x] `partnerListController.ts`å‰Šé™¤æ¸ˆã¿
  - [x] `partnerList.routes.ts`å‰Šé™¤æ¸ˆã¿
- [x] ãƒ†ã‚¹ãƒˆå°‚ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
  - [x] `/api/v1/test/*`ãƒ«ãƒ¼ãƒˆç„¡åŠ¹åŒ–æ¸ˆã¿
- [x] ãƒ‡ãƒãƒƒã‚°ç”¨`console.log`ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [x] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] N+1å•é¡ŒãŒè§£æ±ºã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ä¸è¦ãªãƒ­ã‚°å‡ºåŠ›ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šãŒæœ‰åŠ¹ã‹ç¢ºèªï¼ˆ`ENABLE_CACHING=true`ï¼‰

### 6. Dockerè¨­å®š
- [ ] æœ¬ç•ªç”¨DockerfileãŒæœ€é©åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ä¸è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹ç¢ºèª
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### 7. ç›£è¦–ãƒ»ãƒ­ã‚°è¨­å®š
- [ ] ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ãŒ`info`ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ç›£è¦–ãƒ„ãƒ¼ãƒ«ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šãŒé©åˆ‡ã‹ç¢ºèª

### 8. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚«ãƒãƒªè¨ˆç”»
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥ãŒç¢ºç«‹ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †ãŒæ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ç½å®³å¾©æ—§è¨ˆç”»ãŒç­–å®šã•ã‚Œã¦ã„ã‚‹ã‹

## ğŸ“‹ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: äº‹å‰æº–å‚™
```bash
# 1. æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
git pull origin main

# 2. ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°
npm ci

# 3. ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
npm run build

# 4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ›´æ–°
```bash
# 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å–å¾—
pg_dump production_db > backup_$(date +%Y%m%d_%H%M%S).sql

# 2. ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
npx prisma migrate deploy

# 3. ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
NODE_ENV=production npx ts-node scripts/migrate-business-partners.ts migrate
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# 1. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
docker build -t skillsheet-app:latest .

# 2. ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•
docker-compose -f docker-compose.production.yml up -d

# 3. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
curl https://your-domain.com/api/health
```

### ã‚¹ãƒ†ãƒƒãƒ—4: å‹•ä½œç¢ºèª
- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæ­£å¸¸å¿œç­”ã™ã‚‹ã‹
- [ ] ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ãŒå‹•ä½œã™ã‚‹ã‹
- [ ] å–å¼•å…ˆä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆãƒ»æ›´æ–°ãƒ»å‰Šé™¤ãŒå‹•ä½œã™ã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã‹

## ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã®ç·Šæ€¥å¯¾å¿œæ‰‹é †ï¼š

```bash
# 1. å‰ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™
docker-compose down
git checkout previous-version-tag
docker build -t skillsheet-app:rollback .
docker-compose up -d

# 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå¿…è¦ãªå ´åˆï¼‰
psql production_db < backup_YYYYMMDD_HHMMSS.sql
```

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

1. **æœ¬ç•ªç’°å¢ƒã®`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã¯çµ¶å¯¾ã«Gitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„**
2. **ãƒ‡ãƒ—ãƒ­ã‚¤ã¯å¿…ãšãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ™‚é–“å¸¯ã«å®Ÿæ–½**
3. **ãƒ‡ãƒ—ãƒ­ã‚¤å‰å¾Œã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’æ¯”è¼ƒ**
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®äº‹å‰é€šçŸ¥ã‚’å¿˜ã‚Œãšã«**

## ğŸ“ ç·Šæ€¥é€£çµ¡å…ˆ

- ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…: [é€£çµ¡å…ˆã‚’è¨˜å…¥]
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†è€…: [é€£çµ¡å…ˆã‚’è¨˜å…¥]
- ã‚¤ãƒ³ãƒ•ãƒ©æ‹…å½“: [é€£çµ¡å…ˆã‚’è¨˜å…¥]

## ğŸ“ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°

| æ—¥æ™‚ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ‹…å½“è€… | çŠ¶æ…‹ | å‚™è€ƒ |
|------|-----------|--------|------|------|
| 2025-08-26 | 1.0.0 | - | æº–å‚™å®Œäº† | åˆå›æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ |

---

**æœ€çµ‚ç¢ºèªè€…**: _______________  
**æ‰¿èªè€…**: _______________  
**ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿæ–½æ—¥æ™‚**: _______________