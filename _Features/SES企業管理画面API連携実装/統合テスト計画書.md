# SES企業管理画面 API連携実装 統合テスト計画書

## 文書情報
- **対象システム**: エンジニアスキルシート管理システム
- **参加者**: エンジニアA～E、QAチーム、プロダクトオーナー

---

## 1. テスト概要

### 1.1 目的
- 5人のエンジニアが開発した機能の統合動作確認
- エンドツーエンドでの業務フロー検証
- パフォーマンス・セキュリティ要件の充足確認
- 本番環境へのリリース判定

### 1.2 スコープ
**含む:**
- 全機能のAPI連携動作
- ユーザーロール別の権限確認
- マルチテナント環境での分離確認
- 主要業務シナリオの完全動作

**含まない:**
- 各機能の詳細な単体テスト（各エンジニアが実施済み）
- インフラ・ネットワーク層のテスト
- 負荷テスト（別途実施）

---

## 2. テスト環境

### 2.1 環境構成
```yaml
環境名: staging
API URL: https://staging-api.engineer-skillsheet.com
Frontend URL: https://staging.engineer-skillsheet.com
データベース: PostgreSQL 14（本番同等）
```

### 2.2 テストデータ
```yaml
SES企業:
  - テスト企業A（管理者3名、営業5名、エンジニア50名）
  - テスト企業B（管理者2名、営業3名、エンジニア30名）

取引先企業:
  - 取引先X（テスト企業Aと契約）
  - 取引先Y（テスト企業Bと契約）

フリーランス:
  - テストフリーランス10名（公開設定済み）
```

---

## 3. 統合テストシナリオ

### 3.1 シナリオ1: ダッシュボード表示と基本機能

**担当**: エンジニアA + エンジニアE
**前提条件**: ログイン済み（認証は別途実装済み）

```gherkin
Given SES企業の管理者としてログイン済み
When ダッシュボードを表示し
And KPIデータを取得する
Then 各種統計情報が表示され
And 通知が受信できる
```

**確認項目:**
- [ ] KPIデータの表示
- [ ] リアルタイム通知
- [ ] 企業IDによるデータ分離
- [ ] エラーハンドリング

### 3.2 シナリオ2: エンジニア登録～スキルシート公開

**担当**: エンジニアB + エンジニアE
**前提条件**: SES企業管理者でログイン済み

```gherkin
Given SES企業の管理者として
When 新規エンジニアを登録し
And スキルシート情報を入力し
And 公開設定を有効にする
Then エンジニア一覧に表示され
And 取引先から閲覧可能になる
```

**確認項目:**
- [ ] エンジニアCRUD操作
- [ ] スキルシート自動保存
- [ ] 入力進捗の計算
- [ ] 公開ステータス管理

### 3.3 シナリオ3: 取引先オファーフロー

**担当**: エンジニアC + エンジニアB
**前提条件**: 取引先企業ユーザーでログイン済み

```gherkin
Given 取引先企業の営業として
When オファーボードを開き
And 複数のエンジニアを選択し
And 案件詳細を入力し
And オファーを送信する
Then SES企業にメール通知され
And オファー統計が更新される
```

**確認項目:**
- [ ] 権限に基づくエンジニア表示
- [ ] オファー送信処理
- [ ] メール送信
- [ ] リアルタイム統計更新

### 3.4 シナリオ4: プロジェクト管理～アサイン

**担当**: エンジニアD + エンジニアB
**前提条件**: プロジェクト情報登録済み

```gherkin
Given SES企業の営業として
When プロジェクトを作成し
And エンジニアをアサインし
And ステータスを更新する
Then カンバンボードに反映され
And エンジニアの稼働状況が更新され
And 待機リストから除外される
```

**確認項目:**
- [ ] プロジェクトCRUD
- [ ] ドラッグ&ドロップ動作
- [ ] 稼働状況の自動計算
- [ ] ガントチャート表示

### 3.5 シナリオ5: アプローチ～効果測定

**担当**: エンジニアD + エンジニアC
**前提条件**: アプローチ対象選定済み

```gherkin
Given SES企業の営業として
When 取引先企業を選択し
And エンジニアを選択し
And メールテンプレートを選択し
And アプローチを送信し
And 開封・返信を確認する
Then 統計ダッシュボードに反映される
```

**確認項目:**
- [ ] アプローチウィザード動作
- [ ] メールテンプレート適用
- [ ] 送信ログ記録
- [ ] 効果測定データ収集

### 3.6 シナリオ6: 定期アプローチ自動実行

**担当**: エンジニアD
**前提条件**: 定期アプローチ設定済み

```gherkin
Given 定期アプローチが設定されており
When スケジュール実行時刻になると
Then 条件に合致するエンジニアが選択され
And 除外設定が適用され
And 自動でメール送信される
```

**確認項目:**
- [ ] バッチ処理の実行
- [ ] 除外ロジック動作
- [ ] 送信履歴記録

### 3.7 シナリオ7: マルチテナント分離確認

**担当**: 全エンジニア
**前提条件**: 複数企業データ存在

```gherkin
Given テスト企業Aのユーザーとして
When 各種機能を操作する
Then テスト企業Bのデータは一切表示されず
And APIレベルでもアクセス不可である
```

**確認項目:**
- [ ] データの完全分離
- [ ] 権限エラーの適切な処理
- [ ] ログの分離

---

## 4. 非機能テスト

### 4.1 パフォーマンステスト

**担当**: エンジニアE + QAチーム

| テスト項目 | 基準値 | 測定方法 |
|----------|--------|----------|
| ページ初回読み込み | 2秒以内 | Chrome DevTools |
| API レスポンス | 0.5秒以内 | Postman |
| エンジニア一覧（1000件） | 1秒以内 | 実データ測定 |
| ダッシュボード表示 | 1秒以内 | 実データ測定 |

### 4.2 セキュリティテスト

**担当**: エンジニアE + 認証担当者

- [ ] XSS脆弱性チェック
- [ ] SQLインジェクション対策確認
- [ ] CSRF対策確認
- [ ] 権限制御の適切性
- [ ] データ暗号化
- [ ] APIアクセス制御

### 4.3 ブラウザ互換性テスト

**担当**: QAチーム

| ブラウザ | バージョン | 確認 |
|---------|-----------|------|
| Chrome | 最新2バージョン | [ ] |
| Safari | 最新2バージョン | [ ] |
| Firefox | 最新2バージョン | [ ] |
| Edge | 最新2バージョン | [ ] |

---

## 5. テスト実施スケジュール

### 5.1 タイムライン

```
環境準備・データ投入
基本フローテスト実施（シナリオ1-3）
応用フローテスト実施（シナリオ4-6）
マルチテナント・非機能テスト
不具合修正・再テスト
最終確認・リリース判定
```

### 5.2 デイリースケジュール

```
09:00-09:30: 朝会（進捗共有）
09:30-12:00: テスト実施
12:00-13:00: 昼休憩
13:00-17:00: テスト実施
17:00-18:00: 不具合整理・報告
```

---

## 6. 不具合管理

### 6.1 優先度定義

| 優先度 | 定義 | 対応期限 |
|--------|------|----------|
| Critical | システム停止・データ破損 | 即日 |
| High | 主要機能の動作不良 | 1日以内 |
| Medium | 副次機能の不具合 | 3日以内 |
| Low | UI/UXの軽微な問題 | 次回リリース |

### 6.2 不具合報告フォーマット

```markdown
## 不具合ID: BUG-XXX
**発見日時**: 2024/XX/XX HH:MM
**発見者**: エンジニアX
**優先度**: High
**カテゴリ**: API連携

### 再現手順
1. XXX画面を開く
2. XXXボタンをクリック
3. XXXを入力

### 期待結果
XXXが表示される

### 実際の結果
エラーメッセージが表示される

### スクリーンショット
[添付]

### 環境情報
- ブラウザ: Chrome 120
- OS: macOS 14
- ユーザー: テスト管理者A
```

---

## 7. リリース判定基準

### 7.1 Go判定基準
- [ ] Critical/High優先度の不具合が0件
- [ ] 全統合テストシナリオがPASS
- [ ] パフォーマンス基準を満たす
- [ ] セキュリティチェック完了
- [ ] ドキュメント更新完了

### 7.2 No-Go判定基準
- Critical不具合が残存
- データ分離に問題がある
- パフォーマンス基準未達
- セキュリティ脆弱性発見

---

## 8. リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| API連携の不整合 | 高 | 中 | 早期の結合テスト実施 |
| パフォーマンス劣化 | 高 | 低 | 段階的なデータ投入 |
| 権限設定ミス | 高 | 中 | 権限マトリクステスト |
| テスト環境障害 | 中 | 低 | バックアップ環境準備 |

---

## 9. 成果物

### 9.1 テスト完了時の成果物
- [ ] テスト実施報告書
- [ ] 不具合一覧（対応状況含む）
- [ ] パフォーマンステスト結果
- [ ] セキュリティテスト結果
- [ ] リリース判定書

### 9.2 引き継ぎ資料
- [ ] 運用手順書
- [ ] トラブルシューティングガイド
- [ ] 監視設定書
- [ ] ユーザーマニュアル

---

## 10. 連絡体制

### 10.1 エスカレーション
```
Level 1: チーム内で解決（30分以内）
Level 2: テックリード escalation（1時間以内）
Level 3: プロダクトオーナー判断（当日中）
```

### 10.2 コミュニケーション
- **Slack**: #api-integration-test
- **デイリー**: 09:00-09:30
- **緊急連絡**: 各エンジニアの携帯電話

---

## 11. 付録

### 11.1 テストデータSQL
```sql
-- _Test/testdata.sql 参照
```

### 11.2 API仕様書
- `/Documents/API設計書/` 配下の各文書

### 11.3 画面仕様書
- `/Documents/画面設計書/画面設計書.md`

---

**改訂履歴**
| 版 | 日付 | 改訂内容 | 改訂者 |
|----|------|----------|--------|
| 1.0 | 2024/XX/XX | 初版作成 | - |