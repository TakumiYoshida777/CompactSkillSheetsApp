# Day 3: 統合テスト計画

## テスト実施日時
2025-08-24

## 1. テスト対象ユーザー

| メール | パスワード | ロール | 期待される権限 |
|--------|-----------|--------|--------------|
| admin@example-ses.local | Test123! | admin | 全権限 |
| user@example-ses.local | Test123! | sales | 営業系権限 |
| client@example-client.com | Test123! | client_admin | クライアント管理権限 |

## 2. テストシナリオ

### 2.1 管理者ロール（admin）テスト
- [x] ログイン成功
- [ ] 全メニューへのアクセス可能
- [ ] ユーザー管理機能へのアクセス
- [ ] スキルシート編集・削除権限
- [ ] 企業管理機能へのアクセス

### 2.2 営業ロール（sales）テスト  
- [ ] ログイン成功
- [ ] スキルシート閲覧権限
- [ ] スキルシート作成権限
- [ ] 他ユーザーのスキルシート編集不可
- [ ] 管理機能へのアクセス不可

### 2.3 クライアント管理者ロール（client_admin）テスト
- [ ] ログイン成功
- [ ] 自社関連データのみ閲覧可能
- [ ] オファー機能へのアクセス
- [ ] スキルシート検索機能
- [ ] 他社データへのアクセス不可

## 3. API権限チェックテスト

### 3.1 /api/auth/permissions エンドポイント
- [ ] 各ロールで正しい権限リストが返却される
- [ ] トークンなしで401エラー
- [ ] 無効なトークンで401エラー

### 3.2 /api/auth/check-permission エンドポイント
- [ ] 正しい権限チェック結果が返却される
- [ ] リソース・アクション指定で適切な判定

### 3.3 /api/auth/user-roles エンドポイント
- [ ] ユーザーのロール情報が正しく返却される

## 4. フロントエンド権限制御テスト

### 4.1 メニュー表示制御
- [ ] ロールに応じたメニュー項目の表示/非表示
- [ ] 権限なしページへのアクセス時のリダイレクト

### 4.2 ボタン・アクション制御
- [ ] 編集ボタンの表示/非表示
- [ ] 削除ボタンの表示/非表示
- [ ] 作成ボタンの表示/非表示

## 5. エラーハンドリングテスト

- [ ] 権限なしアクセス時の403エラー表示
- [ ] セッションタイムアウト時の再ログイン誘導
- [ ] ネットワークエラー時の適切なメッセージ表示

## 6. パフォーマンステスト

- [ ] 権限チェックAPIのレスポンス時間（目標: 100ms以内）
- [ ] キャッシュの有効性確認（5分間）
- [ ] 同時アクセス時の負荷テスト

## テスト結果

（テスト実施後に記載）